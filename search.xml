<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Êé¢Á¥¢ÁªÑ‰ª∂Â∫ìÁöÑÊúÄ‰Ω≥ÂÆûË∑µ]]></title>
    <url>%2F2019%2F08%2F22%2Fvue-component-library%2F</url>
    <content type="text"><![CDATA[‰øóËØùËØ¥ÔºöÂÜô‰∏™ÁªÑ‰ª∂Â∫ìÁÆÄÂçïÔºåÂÜôÂ•ΩÁªÑ‰ª∂Â∫ìÂæàÈöæ ÁõÆÊ†á 80%+ÊµãËØïË¶ÜÁõñÁéá ‰∏ç‰ΩøÁî®template Â∞ΩÂèØËÉΩÂ∞èÁöÑÊâìÂåÖ‰ΩìÁßØ ÊîØÊåÅÊåâÈúÄÂä†ËΩΩ ÊîØÊåÅ‰∏ªÈ¢òÂÆöÂà∂ ÊîØÊåÅVSCode Vetur ‰∏çÂàªÊÑèÂ†ÜÁ†åÂäüËÉΩ ‰ª•‰∏ä‰æøÊòØÊàëÂØπËØ•ÁªÑ‰ª∂Â∫ìÁöÑÊúüÊúõÔºåÂ∏¶ÁùÄ‰ª•‰∏äÈúÄÊ±ÇÔºåÂºÄÂßãÁùÄÊâãÂàÜÊûê ÁõÆÊ†áÊãÜËß£1. 80%+ÊµãËØïË¶ÜÁõñÁéáÂØπ‰∫éUIÁªÑ‰ª∂ËÄåË®ÄÔºåËøáÂàÜÊúÄÊ±ÇÊµãËØïË¶ÜÁõñÁéáÊÑè‰πâ‰∏çÂ§ßÔºàÂÆÉ‰ºöÂØºËá¥Êàë‰ª¨ËøáÂàÜÂÖ≥Ê≥®ÁªÑ‰ª∂ÁöÑÂÜÖÈÉ®ÂÆûÁé∞ÁªÜËäÇÔºå‰ªéËÄåÂØºËá¥ÁêêÁ¢éÁöÑÊµãËØïÔºâÔºåÊâÄ‰ª•ÊàëÂ∞Ü80%ÂΩì‰ΩúÊµãËØïËææÊ†áÁ∫ø„ÄÇÊµãËØïÂ∑•ÂÖ∑ÁöÑËØùÊúâËÆ∏Â§öÂèØ‰æõÈÄâÊã©Ôºöjest„ÄÅ mocha„ÄÅkarmaÁ≠âÔºåÊàë‰ΩøÁî®jestÔºåÁõ∏ÂØπÂÖ∂‰ªñÊµãËØïÊ°ÜÊû∂ÔºåÂÆÉÁöÑ‰∏ÄÂ§ßÁâπÁÇπÂ∞±ÊòØÂÜÖÁΩÆ‰∫ÜÂ∏∏Áî®ÁöÑÊµãËØïÂ∑•ÂÖ∑ÔºåÊØîÂ¶ÇËá™Â∏¶Êñ≠Ë®Ä„ÄÅÊµãËØïË¶ÜÁõñÁéáÂ∑•ÂÖ∑ÔºåÂÆûÁé∞‰∫ÜÂºÄÁÆ±Âç≥Áî®„ÄÇ 2.‰∏ç‰ΩøÁî®templateÁõ∏ËæÉ‰∫étemplateÔºåjsxÂú®ÁºñÂÜôÂ§çÊùÇÂü∫Á°ÄÁªÑ‰ª∂Êó∂ÂæÄÂæÄÊõ¥ÂÖ∑‰ºòÂäøÔºå‰∏ç‰ΩøÁî®template‰∏çÊòØÂõ†‰∏∫ÂÆÉ‰∏çÂ•ΩÔºàÁºñÂÜô‰∏öÂä°ÁªÑ‰ª∂Êó∂Êõ¥Êé®Ëçê‰ΩøÁî®templateÔºâÔºåËÄåÊòØÊàë‰∏çÂ∏åÊúõÂú®Âêå‰∏Ä‰∏™ÁªÑ‰ª∂Â∫ìÈáåÂêåÊó∂‰ΩøÁî®jsxÂíåtemplate, ÁÆÄÂåñÁªÑ‰ª∂ÁöÑÁºñËØë‰∏éÊûÑÂª∫ÊµÅÁ®ãËøô‰∏ÄÁÇπÂæàÂÖ≥ÈîÆ„ÄÇ 3.Â∞ΩÂèØËÉΩÂ∞èÁöÑÊâìÂåÖ‰ΩìÁßØÊàë‰ΩøÁî®webpackËøõË°åÊâìÂåÖÔºåÂõ†Ê≠§ÈúÄË¶Å‰ªéwebpackÈÖçÁΩÆÁùÄÊâãÂàÜÊûê„ÄÇÂØπ‰∫é‰ΩøÁî®templateÁºñÂÜôÁöÑvueÁªÑ‰ª∂ÔºåÊúÄÊôÆÈÄöÁöÑÁºñËØëÊñπÂºèÂ∞±ÊòØwebpack + vue-loaderÔºåËøôÊ†∑ÂÅöÁöÑÈóÆÈ¢òÂú®‰∫éÂÆπÊòìÂºïÂÖ•Â§ßÈáèÂÜó‰Ωô‰ª£Á†ÅÔºåÊØîÂ¶ÇÔºöwebpackÂÜÖÁΩÆÁöÑÊ®°ÂùóÂåñ‰ª£Á†Å„ÄÅvue-loader ÂÜÖÁΩÆÁöÑ normalize ÂáΩÊï∞„ÄÅÈáçÂ§çÂºïÂÖ•ÁöÑ babel helper Á≠âÁ≠âÔºåËÄåÊàë‰∏çÂ∏åÊúõÂú®ÁªÑ‰ª∂ÁöÑÁºñËØëÁªìÊûú‰∏≠ÂºïÂÖ•Ëøô‰∫õÂÜó‰Ωô‰ª£Á†ÅÔºåÈÇ£‰πàËøôÁßçÊÉÖÂÜµÊúÄÂ•Ω‰ΩøÁî®ÊØîvue-loaderÊõ¥Â∫ïÂ±ÇÁöÑ‰∏Ä‰∏™Â∑•ÂÖ∑: vue-template-compiler, ÈÄöËøáÂÆÉÁªìÂêàbabelÊù•ÁºñËØëÂèØ‰ª•ÂæóÂà∞ÊØîËæÉÁêÜÊÉ≥ÁöÑÊïàÊûú„ÄÇ ÂΩìÁÑ∂ÊàëÊ≤°Êúâ‰ΩøÁî®Ê®°ÁâàÔºåËÄåÊòØtsxÔºåÊÉÖÂÜµÂ∞±ÂèòÂæóÊõ¥Âä†ÁÆÄÂçï‰∫Ü, Âè™ÈúÄË¶ÅÁî®babelÂ∞ÜtsxÁºñËØëÊàêjs‰∏çÂ∞±Ë°å‰∫ÜÂêóÔºåÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØbabelÔºåÈúÄË¶Å‰ΩøÁî®@babel/plugin-transform-runtimeÈÅøÂÖçÈáçÂ§çÂºïÂÖ•helperÂáΩÊï∞(A plugin that enables the re-use of Babel‚Äôs injected helper code to save on codesize) ÂØπ‰∫érollupÔºåÊàëËßâÂæóÂú®ÊâìÂåÖÁ∫ØjsÂ∫ìÊó∂‰ºòÂäøÊõ¥Â§ßÔºåÊâÄ‰ª•ËøòÊ≤°ÊúâÂ∞ùËØïÁî®ÂÆÉÊù•ÊâìÂåÖÁªÑ‰ª∂Â∫ì„ÄÇËÄå‰∏îÊàëÁúã‰∏ªÊµÅÁªÑ‰ª∂Â∫ì‰πüÈÉΩÊòØÁî®webpackÊâìÂåÖÔºåÂõ†Ê≠§Ë∑üÁùÄ‰∏ªÊµÅÊù•Ê≤°Èîô„ÄÇ 4.ÊîØÊåÅÊåâÈúÄÂä†ËΩΩËøô‰∏™ÊòØÁªÑ‰ª∂Â∫ìÁöÑÂü∫Êú¨ÂäüËÉΩÔºå‰∏ÄËà¨ÈÄöËøáÈÖçÁΩÆbabel-plugin-import Êù•ÂÅöÔºåÂÆÉ‰ºöÂú®ÁºñËØëËøáÁ®ã‰∏≠Â∞Ü import ÁöÑÂÜôÊ≥ïËá™Âä®ËΩ¨Êç¢‰∏∫ÊåâÈúÄÂºïÂÖ•ÁöÑÊñπÂºè„ÄÇÂΩìÁÑ∂Ôºå‰∏çÈó≤È∫ªÁÉ¶ÊâãÂä®ÂºïÂÖ•ÊâÄÈúÄÁªÑ‰ª∂‰πüÊòØÂèØ‰ª•ÁöÑ„ÄÇ Â¶ÇÊûú‰Ω†ÁöÑÈ°πÁõÆÂü∫‰∫éTypescript,ÈÇ£‰πàÁî®ts-import-plugin‰ª£Êõø 5.‰∏ªÈ¢òÂÆöÂà∂ÊàëÂ∏åÊúõÂèØ‰ª•ÂØπÁªÑ‰ª∂Ê†∑ÂºèÂÅöÂÖ®Â±Ä‰øÆÊîπÔºåËÄå‰∏çÊòØÂú®‰ΩøÁî®Êó∂ÂéªË¶ÜÁõñÁªÑ‰ª∂ÂÜÖÈÉ®Á±ªÔºåËøôÂùóÂèØ‰ª•ÈÄöËøálessÂíåless-loaderÈÖçÂêàbabel-plugin-importÊù•ÂÅö Â¶ÇÊûúÊòØ‰ΩøÁî®.vueÁöÑÁªÑ‰ª∂ÂºÄÂèëÊñπÂºèÔºå‰∏ÄËà¨ÈúÄË¶ÅÂ∞ÜÊ†∑ÂºèÂçïÁã¨ÊäΩÂá∫Êù•ËÄå‰∏çÊòØÂÜôÂú®‰∏≠ÔºåÂê¶ÂàôÈúÄË¶ÅÁî®Âà∞ÂêéÁºñËØë„ÄÇÔºàÂèÇËÄÉcube-uiÔºâ 6.ÊîØÊåÅVSCode VeturÊàëÂ∏åÊúõÂú®VSCode‰∏≠‰ΩøÁî®ËØ•ÁªÑ‰ª∂Êó∂‰ºöÊúâËá™Âä®ÊèêÁ§∫ÔºåËøôÂùóÂèØ‰ª•ÂÄüÂä©Á¨¨‰∏âÊñπÊèí‰ª∂ÁîüÊàêÂØπÂ∫îÁöÑvetur jsonÊñá‰ª∂„ÄÇ ÊúüÊúõÁªÑ‰ª∂ÁõÆÂΩïÁªìÊûÑÁªÑ‰ª∂Áªü‰∏ÄÊîæÂú®src/componentsÁõÆÂΩï‰∏ãÁÆ°ÁêÜÔºåÊØè‰∏™ÁªÑ‰ª∂ÁöÑÁªìÊûÑÂ§ßËá¥Â¶Ç‰∏ãÔºö12345678910111213button - demo // ÁªÑ‰ª∂demo - test // ÂçïÂÖÉÊµãËØï - index.less - index.tsx - README.mdÂÖ∂ÂÆÉÁªÑ‰ª∂ - demo // ÁªÑ‰ª∂demo - test // ÂçïÂÖÉÊµãËØï - index.less - index.tsx - README.md... ÊúüÊúõÊâìÂåÖÁªìÊûúÊåâÁÖßÁõÆÂâç‰∏ªÊµÅÁöÑÂÅöÊ≥ïÔºåËæìÂá∫3ÁßçÊ†ºÂºèÁöÑ‰ª£Á†ÅÔºöES Module„ÄÅcommonjs„ÄÅUMD ÊâÄË∞ìUMDÔºàUniversal Module DefinitionÔºâÊåáÁöÑÊòØÔºö ÂÖàÂà§Êñ≠ÊòØÂê¶ÊîØÊåÅNode.jsÊ®°ÂùóÊ†ºÂºèÔºàexportsÊòØÂê¶Â≠òÂú®ÔºâÔºåÂ≠òÂú®Âàô‰ΩøÁî®Node.jsÊ®°ÂùóÊ†ºÂºè„ÄÇ ÂÜçÂà§Êñ≠ÊòØÂê¶ÊîØÊåÅAMDÔºàdefineÊòØÂê¶Â≠òÂú®ÔºâÔºåÂ≠òÂú®Âàô‰ΩøÁî®AMDÊñπÂºèÂä†ËΩΩÊ®°Âùó„ÄÇ Ââç‰∏§‰∏™ÈÉΩ‰∏çÂ≠òÂú®ÔºåÂàôÂ∞ÜÊ®°ÂùóÂÖ¨ÂºÄÂà∞ÂÖ®Â±ÄÔºàwindowÊàñglobalÔºâ„ÄÇ Âú®package.json‰∏≠ÔºåËÆæÁΩÆËøô2ÁßçÊ®°ÂùóÁöÑÂÖ•Âè£Ôºö1234&#123; "main": "lib/index.js", // cjs "module": "es/index.js", // esm&#125; Ëá≥‰∫éUMDÊ†ºÂºèÁöÑ‰ª£Á†ÅÔºåÊàë‰ºöÂú®ÊúÄÂêéÈÄöËøáwebpackÊâìÂåÖÁîüÊàêxpre.jsÂíåxpre.min.jsÂπ∂ÊîæÂà∞CDN‰∏ä ÊúüÊúõ‰ΩøÁî®ÊñπÂºè‰∏Ä„ÄÅÊåâÈúÄÂºïÂÖ•ÔºàÊé®ËçêÔºâ12import &#123; Button &#125; from 'xpre';Vue.use(Button) ‰∫å„ÄÅÂÖ®ÈÉ®ÂºïÂÖ•Ôºà‰∏çÊé®ËçêÔºâ12import Xpre from 'xpre';Vue.use(Xpre) ‰∏â„ÄÅCDNÂºïÂÖ• ÈÄöÂ∏∏‰∏ç‰ºö‰ΩøÁî®ËøôÁßçÊñπÂºèÔºå‰ΩÜÊüê‰∫õÊó∂ÂÄôËøòÊòØÊúâÂøÖË¶ÅÁöÑ12&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xpre@0.x/lib/index.css"&gt;&lt;script src="https://cdn.jsdelivr.net/npm/xpre@0.x/lib/xpre.min.js"&gt;&lt;/script&gt; Ê†πÊçÆÊúüÊúõËæìÂÖ•‰∏éËæìÂá∫ÊûÑÂª∫ËÑöÊú¨Êúâ‰∫ÜËæìÂÖ•ÔºàÊúüÊúõÁªÑ‰ª∂ÁõÆÂΩïÁªìÊûÑÔºâÂíåËæìÂá∫ÔºàÊúüÊúõÊâìÂåÖÁªìÊûúÔºâÔºå‰ª•Âèä‰ΩøÁî®ÊñπÂºèÔºåÂ∞±ÂèØ‰ª•ÁùÄÊâãÁºñÂÜôÊûÑÂª∫ËÑöÊú¨‰∫Ü„ÄÇ 1.ÊàëÊúüÊúõ‰ΩøÁî®Vue.use(Xpre)ÁöÑÊñπÂºèÊ≥®ÂÜåÁªÑ‰ª∂ÔºåÈÇ£‰πàXpreÂøÖÈ°ªÂÆûÁé∞install ÊñπÊ≥ïÔºåÂÖ•Âè£index.tsÊñá‰ª∂Â§ßÊ¶ÇËøôÊ†∑Ôºö1234567891011121314151617181920212223242526272829import &#123; VueConstructor &#125; from 'vue/types';import Button from './components/button';// ...const components: any[] = [ Button ...];const install = (Vue: VueConstructor) =&gt; &#123; components.forEach(Component =&gt; &#123; Vue.use(Component); &#125;);&#125;;// ÊµèËßàÂô®ÁéØÂ¢Éif (typeof window !== 'undefined' &amp;&amp; window.Vue) &#123; install(window.Vue);&#125;// import &#123; Button &#125; from 'xpre'export &#123; install, Button&#125;// import Xpre from 'xpre'export default &#123; install&#125; Áî±Ê≠§ÂèØËßÅÔºåÊØè‰∏™ÁªÑ‰ª∂ÂÜÖÈÉ®Â¶Ç:ButtonÔºå‰πüÈÉΩÈúÄË¶ÅÂÆûÁé∞installÊñπÊ≥ï„ÄÇ‰∏∫‰∫ÜÊñπ‰æøÔºåÂÜô‰∏Ä‰∏™Ëá™Âä®ÊûÑÂª∫index.tsÁöÑËÑöÊú¨Ôºå‰ª•ÂÖçÊØèÊ¨°Êñ∞Â¢ûÁªÑ‰ª∂ÁöÑÊó∂ÂÄôÊâãÂä®‰øÆÊîπindex.ts„ÄÇ ÊûÑÂª∫ËÑöÊú¨Áªü‰∏ÄÂú®buildÁõÆÂΩï‰∏ãÁÆ°ÁêÜÔºåÊñ∞Âª∫build/build-entry.js, ÂÆÉÈúÄË¶ÅÂéªÈÅçÂéÜsrc/componentsÁõÆÂΩïÊù•ÁîüÊàêindex.ts:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253const fs = require('fs-extra');const path = require('path');const uppercamelize = require('uppercamelcase');const Components = require('./get-components')();const packageJson = require('../package.json');const version = process.env.VERSION || packageJson.version;const tips = `/* eslint-disable */`;function buildEntry() &#123; const importList = Components.map(name =&gt; `import $&#123;uppercamelize(name)&#125; from './components/$&#123;name&#125;';`); const exportList = Components.map(name =&gt; `$&#123;uppercamelize(name)&#125;`); const content = `$&#123;tips&#125;import &#123; VueConstructor &#125; from 'vue/types';$&#123;importList.join('\n')&#125;declare global &#123; interface Window &#123; Vue?: VueConstructor; &#125;&#125;const components: any[] = [ $&#123;exportList.join(',\n ')&#125;];const install = (Vue: VueConstructor) =&gt; &#123; components.forEach(Component =&gt; &#123; Vue.use(Component); &#125;);&#125;;/* istanbul ignore if */if (typeof window !== 'undefined' &amp;&amp; window.Vue) &#123; install(window.Vue);&#125;export &#123; install, $&#123;exportList.join(',\n ')&#125;&#125;;export default &#123; install&#125;;`; // ËæìÂá∫ÂÜÖÂÆπÂà∞index.ts fs.writeFileSync(path.join(__dirname, '../src/index.ts'), content);&#125;buildEntry(); 2.Â§ÑÁêÜ‰∫ÜÂÖ•Âè£Êñá‰ª∂ÔºåÊé•‰∏ãÊù•ÈúÄË¶ÅÁºñËØëÁªÑ‰ª∂‰∫Ü Êñ∞Âª∫build/build-components.js, ÂÆÉÈúÄË¶ÅÈÄíÂΩíÂú∞ÂéªÁºñËØësrcÁõÆÂΩï‰∏ãÁöÑÊâÄÊúâjs|ts|tsxÊñá‰ª∂ÔºåÂπ∂ÊúÄÁªàÁîüÊàêesÂíålib‰∏§‰∏™ÁºñËØëÂêéÁöÑÁõÆÂΩïÔºå‰ΩøÁî®babelÊù•ËøõË°åÁºñËØëÔºö1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859const fs = require('fs-extra');const path = require('path');const babel = require('@babel/core');const esDir = path.join(__dirname, '../es');const libDir = path.join(__dirname, '../lib');const srcDir = path.join(__dirname, '../src');const babelConfig = &#123; configFile: path.join(__dirname, '../babel.config.js')&#125;;const scriptRegExp = /\.(js|ts|tsx)$/;const isDir = dir =&gt; fs.lstatSync(dir).isDirectory();const isCode = path =&gt; !/(demo|test|\.md)$/.test(path);const isScript = path =&gt; scriptRegExp.test(path);// ÂàÜÂà´ÁºñËØëes/lib‰∏§‰∏™ÁõÆÂΩïfunction compile(dir) &#123; const files = fs.readdirSync(dir); files.forEach(file =&gt; &#123; const filePath = path.join(dir, file); // Èô§‰∫Üjs|ts|tsxÊñá‰ª∂‰∏ÄÂæã‰∏çÁÆ° if (!isCode(file)) &#123; return fs.removeSync(filePath); &#125; // ÈÄíÂΩíÁºñËØë if (isDir(filePath)) &#123; return compile(filePath); &#125; // compile if (isScript(file)) &#123; // Ê†πÊçÆÂÆö‰πâÁöÑbabelËßÑÂàôÁîüÊàêcode // ÁßªÈô§ÂéüÊñá‰ª∂Ôºàjs|ts|tsxÔºâ // ÁîüÊàêÊñ∞Êñá‰ª∂ÔºàjsÔºâ const &#123; code &#125; = babel.transformFileSync(filePath, babelConfig); fs.removeSync(filePath); fs.outputFileSync(filePath.replace(scriptRegExp, '.js'), code); &#125; &#125;);&#125;// clear dirfs.emptyDirSync(esDir);fs.emptyDirSync(libDir);// compile es dirfs.copySync(srcDir, esDir);compile(esDir);// compile lib dir// ËÆæÁΩÆÁéØÂ¢ÉÂèòÈáèÔºåÂú®babel.config.jsÈáå‰ºöÊ†πÊçÆËØ•ÁéØÂ¢ÉÂèòÈáèËæìÂá∫‰∏çÂêåÁöÑÊ®°Âùóprocess.env.BABEL_MODULE = 'commonjs';fs.copySync(srcDir, libDir);compile(libDir); ‰∏äÈù¢ÁöÑÊûÑÂª∫ËÑöÊú¨ÊòØÊ†πÊçÆbabel.config.jsÁöÑÈÖçÁΩÆËÄåÊù•ÔºåÈÇ£‰πàÂÆÉÂ§ßÊ¶ÇÈúÄË¶ÅÂ¶Ç‰∏ãÈÖçÁΩÆÔºö12345678910111213141516171819202122232425262728293031323334353637383940module.exports = function () &#123; const &#123; BABEL_MODULE, NODE_ENV &#125; = process.env; const useESModules = BABEL_MODULE !== 'commonjs' &amp;&amp; NODE_ENV !== 'test'; return &#123; presets: [ [ '@babel/preset-env', // ÁéØÂ¢ÉÈ¢ÑËÆæ &#123; // ÈªòËÆ§‰∏∫falseÔºåËÆæÁΩÆ‰∏∫trueÂèØÂáèÂ∞ëÁºñËØëÂêé‰ª£Á†ÅÈáè loose: true, // "amd" | "umd" | "systemjs" | "commonjs" | "cjs" | "auto" | false, defaults to "auto" // Ë°®Á§∫ES6ËØ≠Ê≥ïÁöÑÁºñËØëÁõÆÊ†áÔºåfalseË°®Á§∫‰∏çËΩ¨Êç¢ÔºåcommonjsÁ≠âÂêå‰∫écjs modules: useESModules ? false : 'cjs' &#125; ], [ // Configurable preset for Vue JSX plugins '@vue/babel-preset-jsx', &#123; functional: false &#125; ], // Ëß£Êûê.ts '@babel/preset-typescript' ], plugins: [ [ '@babel/plugin-transform-runtime', &#123; corejs: false, helpers: true, regenerator: false, useESModules &#125; ], '@babel/plugin-transform-object-assign' ] &#125;;&#125;; Èô§‰∫ÜÈÖçÁΩÆ‰∏Ä‰∫õpresetsÂíåpluginsÂ§ñÔºåËøòÈúÄË¶ÅÊ†πÊçÆÁéØÂ¢ÉÂèòÈáèÊîπÂèòÊâìÂåÖÁöÑÊ®°ÂùóÊ†ºÂºè„ÄÇËøôÈáåÁöÑÊèí‰ª∂@babel/plugin-transform-runtimeÂâçÈù¢‰πüÊèêÂà∞ËøáÔºåÊ≥®ÊÑèregenerator: falseËøô‰∏™ÈÄâÈ°πÔºåË°®Á§∫‰∏çÈáçÂ§çÁîüÊàêhelperÂáΩÊï∞ÔºåÂê¶ÂàôÊâìÂåÖÂêé‰ºöÂ§öÂá∫ËÆ∏Â§öÂÜó‰Ωô‰ª£Á†Å 3.Êé•‰∏ãÊù•ÈúÄË¶ÅÁºñËØëÁªÑ‰ª∂Ê†∑ÂºèÔºåÂ∞Ü.lessÊñá‰ª∂ÁªèËøá‰∏ÄÁ≥ªÂàóÁºñËØëËΩ¨ÂåñÊàêÊúÄÁªàÁöÑ.css ÈúÄË¶ÅÁî®Âà∞ÁöÑÂ∑•ÂÖ∑Â§ßËá¥Â¶Ç‰∏ãÔºö12345// build/build-style.js const less = require('less'); // less -&gt; cssconst postcss = require('postcss'); // ÂØπcssËøõË°åÂêéÂ§ÑÁêÜconst csso = require('csso'); // cssÂéãÁº©‰ºòÂåñ 4.Êé•‰∏ãÈúÄË¶ÅÊ†πÊçÆÁîüÊàêÁöÑÊ†∑ÂºèÁîüÊàêÁªÑ‰ª∂ÁöÑstyleÂÖ•Âè£ÔºåËøôÂùóÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÁîüÊàêÊ†∑ÂºèÁõÆÂΩïÁöÑÁªìÊûÑÔºåÂõ†‰∏∫ÊàëÈúÄË¶ÅÁªÑ‰ª∂Âú®‰ΩøÁî®Êó∂ËÉΩÂ§üÁªìÂêàbabel-plugin-importÊù•ÂÅöÊ†∑ÂºèÁöÑÊåâÈúÄÂä†ËΩΩÂíå‰∏ªÈ¢òÂÆöÂà∂ ÈÄöËøábabel-plugin-importÁöÑÁ§∫‰æãËØ¥ÊòéÔºö12345678910// &#123; "libraryName": "antd", style: true &#125;import &#123; Button &#125; from 'antd';ReactDOM.render(&lt;Button&gt;xxxx&lt;/Button&gt;); ‚Üì ‚Üì ‚Üì ‚Üì ‚Üì ‚Üìvar _button = require('antd/lib/button');require('antd/lib/button/style');ReactDOM.render(&lt;_button&gt;xxxx&lt;/_button&gt;); ÂèØ‰ª•ÂèëÁé∞ÔºåÂÖ∂ÂÆûÈÄöËøáËÆæÁΩÆstyle: trueÔºåÂú®ÊåâÈúÄÂºïÂÖ•ÁªÑ‰ª∂ButtonÊó∂Â∞±ËÉΩËá™Âä®Â∏ÆÊàë‰ª¨ÂºïÂÖ•ÂØπÂ∫îÁöÑÊ†∑ÂºèÔºåÂõ†Ê≠§‰Ωï‰∏çÊ®°‰ªøantdÔºåÂú®ÂØπÂ∫îÁªÑ‰ª∂‰∏ãÁîüÊàêstyle.js:1require('xxx.css') ÂΩìÁÑ∂ËøôÊ†∑‰∏çÂ§üÔºåÂõ†‰∏∫ÂâçÈù¢ÊàëËØ¥ËøáË¶ÅÂÅö‰∏ªÈ¢òÂÆöÂà∂ÔºåÊàëËøòÈúÄË¶ÅÁîüÊàê‰∏Ä‰∏™less.jsÔºö1require('xxx.less') Âú®ÈÖçÁΩÆbabel-plugin-importÁöÑÊó∂ÂÄôÂèØ‰ª•ËøôÊ†∑ÂÅöÔºö12345678910// babel.config.jsmodule.exports = &#123; plugins: [ ["import", &#123; "libraryName": "xpre", "libraryDirectory": "es/components", "style": name =&gt; `$&#123;name&#125;/style/less` &#125;] ]&#125; ÁÑ∂ÂêéÊ†πÊçÆlessÊèê‰æõÁöÑmodifyVars‰øÆÊîπlessÂèòÈáèËææÂà∞ÁõÆÁöÑÔºö12345678910111213141516171819module.exports = &#123; rules: [ &#123; test: /\.less$/, use: [ &#123; loader: 'less-loader', options: &#123; modifyVars: &#123; red: 'red', blue: 'blue', orange: 'orange' &#125; &#125; &#125; ] &#125; ]&#125;; Âà∞ËøôÈáåÊúÄÁªàÁöÑÁºñËØëÁîüÊàêÁöÑÁªÑ‰ª∂Ê†∑ÂºèÁªìÊûÑÂ∫îËØ•ÊòØËøôÊ†∑Ôºö123style - index.js // Áî®‰∫éÁªìÂêàbabel-plugin-importÂÅöÁªÑ‰ª∂Ê†∑ÂºèÁöÑËá™Âä®ÊåâÈúÄÂä†ËΩΩ - less.js // Áî®‰∫éÁªìÂêàbabel-plugin-importÂÅö‰∏ªÈ¢òÂÆöÂà∂ ÂàÜÊûêÂà∞ËøôÈáåÂ∞±ÂèØ‰ª•ÂÜôÊûÑÂª∫Ê†∑ÂºèÂÖ•Âè£ÁöÑËÑöÊú¨‰∫ÜÔºåËøôÂùóÂÅöËµ∑Êù•‰ºöÈ∫ªÁÉ¶‰∫õÔºåÈúÄË¶ÅÊ†πÊçÆÊ†∑ÂºèÁöÑ‰æùËµñÂÖ≥Á≥ªÂéªÁ°ÆÂÆöÊ†∑ÂºèÂÖ•Âè£‰æùËµñÁöÑÊ†∑ÂºèÊñá‰ª∂„ÄÇ 5.Ê†πÊçÆÁîüÊàêÁöÑes/index.jsÊâìÂåÖÁîüÊàêumdÊ†ºÂºè‰ª£Á†Å ÂØπÂ∫îÁöÑwebpackÈÖçÁΩÆÂ∞±ÁÆÄÂçïËÆ∏Â§ö‰∫ÜÔºö1234567891011121314151617181920212223242526module.exports = Object.assign(config, &#123; mode: 'production', entry: &#123; xpre: './es/index.js' &#125;, output: &#123; path: path.join(__dirname, '../lib'), library: 'xpre', // Êö¥Èú≤‰∏∫ÊâÄÊúâÁöÑÊ®°ÂùóÂÆö‰πâ‰∏ãÈÉΩÂèØËøêË°åÁöÑÊñπÂºè„ÄÇÂÆÉÂ∞ÜÂú® CommonJS, AMD ÁéØÂ¢É‰∏ãËøêË°åÔºåÊàñÂ∞ÜÊ®°ÂùóÂØºÂá∫Âà∞ global ‰∏ãÁöÑÂèòÈáè libraryTarget: 'umd', filename: isMinify ? '[name].min.js' : '[name].js' &#125;, // Èò≤Ê≠¢Â∞ÜvueÊâìÂà∞bundle‰∏≠ externals: &#123; vue: &#123; root: 'Vue', commonjs: 'vue', commonjs2: 'vue', amd: 'vue' &#125; &#125;, performance: false, optimization: &#123; minimize: isMinify &#125;&#125;); Ëøô‰∏ÄÊ≠•Âêé‰ºöÂú®libÁõÆÂΩï‰∏ãÁîüÊàêxpre.jsÂíåxpre.min.js Âà∞ËøôÈáåÔºåÁªÑ‰ª∂ÁöÑÁºñËØëÂ∑•‰ΩúÂ∞±Ê≠£ÂºèÁªìÊùü‰∫ÜÔºåËøô‰∏™ËøáÁ®ãÊàëÂéª‰∫ÜËß£‰∫ÜÂ§ßÈáèÁöÑÁªÑ‰ª∂Â∫ìÁöÑÁºñËØëÊµÅÁ®ãÔºåËôΩËØ¥ÁôæËä±ÈΩêÊîæÔºå‰ΩÜÊÄªÁöÑÂéüÁêÜÁõ∏ÈÄöÔºåËøô‰∏™ËøáÁ®ãÊ≤°Êúâ‰∫∫Â∏¶ÁöÑËØùËøòÊòØÈúÄË¶ÅË∏©ËÆ∏Â§öÂùëÁöÑ„ÄÇÊé•‰∏ãÊù•ÂèØ‰ª•Ê≠£ÂºèÂºÄÂßãÂÜôÁªÑ‰ª∂‰∫Ü„ÄÇÂÖ≥‰∫éÁªÑ‰ª∂Â∫ìÂëΩÂêç‰πãÂâçÊàëÁªôÁªÑ‰ª∂Â∫ìÁöÑÂëΩÂêçÊòØÂ∏¶scopeÁöÑÔºåÊØîÂ¶ÇÔºö@scope/xxx, ÂêéÊù•ÊàëÂèëÁé∞ÈÄöËøá‰ª•‰∏ãÊñπÂºèÊó†Ê≥ïÂºïÂÖ•ÁªÑ‰ª∂Â∫ìÔºö12345import Xpre from '@scope/xxx'// Xpre is not defined// ËøôÁßçÊÉÖÂÜµÈúÄË¶ÅÊâãÂä®ÊåáÂÆöË∑ØÂæÑÊâçËÉΩÊ≠£Á°ÆÂØºÂÖ•ÔºåÂ¶Ç‰∏ãÔºöimport Xpre from '@scope/xxx/lib' Ëøô‰∏™ËØ°ÂºÇÁöÑbugÔºåÊàëÁõÆÂâç‰πüÊâæ‰∏çÂà∞ÂéüÂõ†ÔºåÁ¥¢ÊÄßÈáçÊñ∞ÂëΩÂêçÔºåÂéªÊéâscopeÂ∞±Â•Ω‰∫Ü„ÄÇÂõ†Ê≠§ÁªÑ‰ª∂Â∫ìÁöÑÂåÖÂêçÊúÄÂ•Ω‰∏çË¶ÅÂ∏¶‰∏äscope]]></content>
      <categories>
        <category>ÁªÑ‰ª∂Â∫ì</category>
      </categories>
      <tags>
        <tag>webpack4</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰ªé0ÂÆûÁé∞call()/apply()/bind()]]></title>
    <url>%2F2019%2F06%2F05%2Fbind%2F</url>
    <content type="text"><![CDATA[call()/apply()Âú®Â∑•‰Ωú‰∏≠ÊúâÁùÄËØ∏Â§öÁöÑÂ∫îÁî®ÔºåÊú¨ÁùÄÁü•ÂÖ∂ÁÑ∂Áü•ÂÖ∂ÊâÄ‰ª•ÁÑ∂ÁöÑÂéüÂàôÔºåÁé∞Âú®Êàë‰ª¨‰ªé0Êù•ÂÆûÁé∞call/apply/bind„ÄÇÂÖ∂ÂÆû‰πüÂæàÁÆÄÂçïÔºåÊÄùË∑ØÂæàÈáçË¶Å„ÄÇ call()ÊÉ≥Ë¶ÅÂÆûÁé∞callÔºåÊàë‰ª¨ÂæóÂÖà‰∫ÜËß£ÂÖ∂Ê†∏ÂøÉÂéüÁêÜÔºöÊîπÂèòÂáΩÊï∞‰ΩìÂÜÖÁöÑthisÊåáÂêë(Êü•ÁúãMDNÂÆòÊñπËß£Èáä)„ÄÇÂõ†Ê≠§‰ªé‰∏Ä‰∏ãÂá†ÁÇπÂÖ•ÊâãÔºö Â∞ÜÂáΩÊï∞ËÆæÁΩÆ‰∏∫ÂØπË±°ÁöÑÂ±ûÊÄßfn ÊãøÂà∞arguments‰º†ÁªôfnÂπ∂ÊâßË°å Âà†Èô§fnÔºåËøòÂéüÂØπË±° 1234567891011121314151617181920if(typeof Function.prototype.mycall !== 'function') &#123; Function.prototype.mycall = function(obj) &#123; let args; if(Object.prototype.toString.call(obj) !== '[object Object]') &#123; obj = window; // if in node: obj = global; &#125; args = [...arguments].slice(1); // Ëé∑ÂèñÂèÇÊï∞ obj.fn = this; // Â∞ÜÂáΩÊï∞ËÆæÁΩÆ‰∏∫ÂØπË±°ÁöÑÂ±ûÊÄßfn obj.fn(...args); // ‰º†ÂÖ•ÂèÇÊï∞Âπ∂ÊâßË°åfn delete obj.fn; // Âà†Èô§Â±ûÊÄßfn &#125;&#125;var value = 'global value';var bar = &#123; value: 'local value' &#125;;function foo(a, b) &#123; console.log(a, b) console.log(this.value)&#125;foo.mycall(bar, 1, 2) //1Ôºå2Ôºå'local value'foo.mycall(null, 1, 2) // 1, 2, 'global value' apply()ÈÇ£‰πàÂØπ‰∫éapplyÔºåÈô§‰∫ÜÂèÇÊï∞ÁöÑ‰º†ÈÄíÂΩ¢Âºè‰∏çÂêåÂ§ñÔºåÂéüÁêÜÂêåcallÔºö 123456789101112if(typeof Function.prototype.myapply !== 'function') &#123; Function.prototype.myapply = function(obj) &#123; if(Object.prototype.toString.call(obj) !== '[object Object]') &#123; obj = window; &#125; obj.fn = this; obj.fn(...arguments[1]); // Âõ†‰∏∫Á¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØarrayÔºåÁõ¥Êé•Ëé∑ÂèñÁ¨¨‰∫å‰∏™ÂèÇÊï∞Âπ∂‰º†ÂÖ•fnË∞ÉÁî® delete obj.fn; &#125;&#125; bind() bind()ÊñπÊ≥ïÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂáΩÊï∞ÔºåÂú®Ë∞ÉÁî®Êó∂ËÆæÁΩÆthisÂÖ≥ÈîÆÂ≠ó‰∏∫Êèê‰æõÁöÑÂÄº„ÄÇÂπ∂Âú®Ë∞ÉÁî®Êñ∞ÂáΩÊï∞Êó∂Â∞ÜÁªôÂÆöÂèÇÊï∞ÂàóË°®‰Ωú‰∏∫ÂéüÂáΩÊï∞ÁöÑÂèÇÊï∞Â∫èÂàóÁöÑÂâçËã•Âπ≤È°π MDNÁ§∫‰æãÔºö123456789101112131415var module = &#123; x: 42, getX: function() &#123; return this.x; &#125;&#125;var unboundGetX = module.getX;console.log(unboundGetX()); // The function gets invoked at the global scope// expected output: undefinedvar boundGetX = unboundGetX.bind(module);console.log(boundGetX());// expected output: 42// this equal to unboundGetX.call(module) ÁÆÄÂçïÂÆûÁé∞ÁöÑËØùÔºåÊàë‰ª¨ÂèØ‰ª•Âú®mybind()ÂÜÖËøîÂõû‰∏Ä‰∏™ÂåøÂêçÂáΩÊï∞ÔºåËØ•ÂáΩÊï∞ÂÜÖÈÉ®ÈÄöËøácall()Êù•ÊîπÂèòthisÊåáÂêëÔºå‰ªéËÄåÊ®°ÊãüÂá∫bind()ÊñπÊ≥ï 12345678if(typeof Function.prototype.mybind !== '[object Object]') &#123; Function.prototype.mybind = function(obj) &#123; let fn = this; return function() &#123; return fn.call(obj); &#125; &#125;&#125;]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[JavascriptÂáΩÊï∞ÊüØÈáåÂåñ]]></title>
    <url>%2F2019%2F05%2F31%2Fcurry%2F</url>
    <content type="text"><![CDATA[Function ApplyÂú®‰∏Ä‰∫õÂ≠òÁ≤πÁöÑÂáΩÊï∞ÂºèÁºñÁ®ãËØ≠Ë®Ä‰∏≠ÔºåÂáΩÊï∞Âπ∂‰∏çÊòØË¢´ÊèèËø∞‰∏∫calledÊàñinvokedÔºåËÄåÊòØÊèèËø∞‰∏∫applied„ÄÇÂú®jsÈáåÈù¢ÔºåÈÄöËøáFunction.prototype.apply()ÂèØ‰ª•ÂÆûÁé∞Function Apply„ÄÇ ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®ÁöÑ‰æãÂ≠êÔºö 1234567function say(s) &#123; return "Hello" + s;&#125;//Ë∞ÉÁî®ÂáΩÊï∞say("world");//Â∫îÁî®ÂáΩÊï∞say.apply(null, ["world"]) Âú®‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÔºåinvokingÂíåapplyingÂèØ‰ª•ÂæóÂà∞Áõ∏ÂêåÁöÑÁªìÊûú„ÄÇapply()Êé•Âèó‰∏§‰∏™ÂèÇÊï∞ÔºöÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞‰∏∫Â∞ÜË¶ÅÁªëÂÆöÂà∞ËØ•ÂáΩÊï∞‰ΩìÂÜÖthisÁöÑ‰∏Ä‰∏™ÂØπË±°ÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞‰∏∫‰∏Ä‰∏™Êï∞ÁªÑ„ÄÇÂ¶ÇÊûúÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞‰∏∫Á©∫ÔºåÈÇ£‰πàthisÊåáÂêëÂÖ®Â±Ä„ÄÇ Èô§‰∫Üapply()‰ª•Â§ñÔºåËøòÊúâcall()ÊñπÊ≥ïÔºåÂÆÉ‰ªÖ‰ªÖÂè™ÊòØapply()ÁöÑËØ≠Ê≥ïÁ≥ñ„ÄÇÂΩìÂáΩÊï∞‰ªÖÊúâ‰∏Ä‰∏™ÂèÇÊï∞Êó∂ÔºåÊé®Ëçê‰ΩøÁî®call‰ª£ÊõøapplyÔºåÂõ†‰∏∫ÂèØ‰ª•ÈÅøÂÖçÂàõÂª∫Âè™Êúâ‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÊï∞ÁªÑÔºåÂáèÂ∞èÂÜÖÂ≠òÂºÄÈîÄ„ÄÇ ‰∏∫‰∫ÜËææÂà∞ÊúÄ‰Ω≥Êñ∞ËÉΩÔºåNodeÁöÑEventÊ®°ÂùóÂ∞±Âú®‰∏â‰∏™ÂèÇÊï∞‰ª•‰∏ãÁî®callÂê¶ÂàôÁî®apply ÔºàÊàëÂÜô‰∫Ü‰∏ÄÁØáÊñáÁ´†ÔºåÂ¶Ç‰Ωï‰ªé0ÂÆûÁé∞call/apply/bindÊñπÊ≥ïÔºâ CurrycurryÂåñÂ∞±ÊòØÂ∞ÜÂÆåÂÖ®Â∫îÁî®ÂáΩÊï∞Âèò‰∏∫ÈÉ®ÂàÜÂ∫îÁî®ÂáΩÊï∞ÁöÑËøáÁ®ãÔºàÁÆÄÂçïÊù•ËØ¥Â∞±ÊòØÈÄöËøáÊîπÂèò‰º†ÈÄíÁªôÂáΩÊï∞ÂèÇÊï∞ÁöÑ‰∏™Êï∞Êù•ËææÂà∞ÊîπÂèòÂáΩÊï∞ËøîÂõûÁªìÊûúÔºâ ÂÖà‰∏æ‰∏™ÁÆÄÂçïÁÇπÁöÑüå∞Ôºö 12345678910111213function add(x, y) &#123; //ÈÉ®ÂàÜÂ∫îÁî® if(typeof y === "undefined") &#123; return function(y) &#123; return x + y &#125; &#125; //ÂÆåÂÖ®Â∫îÁî® return x + y&#125;add(1)(2) // 3ÔºàÈÉ®ÂàÜÂ∫îÁî®Ôºâadd(1, 2) // 3ÔºàÂÆåÂÖ®Â∫îÁî®Ôºâ ‰∏äÈù¢ÁöÑ‰ª£Á†ÅÊØîËæÉÂÆπÊòìÁêÜËß£ÔºöÂ¶ÇÊûúÂêåÊó∂‰º†ÈÄíxÂíåyÔºå‰ºöËµ∞Áõ¥Êé•return x+yÔºõ‰ΩÜÂ¶ÇÊûúÂè™‰º†‰∏Ä‰∏™xÔºåÈÇ£‰ºöËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÂáΩÊï∞ÔºåÂπ∂Â∞Ü‰πãÂâç‰º†ÈÄíÁöÑx‰øùÂ≠òËµ∑Êù•‰æõ‰∏ãÊ¨°ÂáΩÊï∞Â∫îÁî® ÁÑ∂ÂêéÂÆûÁé∞‰∏Ä‰∏™ÈÄöÁî®ÁöÑcurryÂáΩÊï∞Ôºö12345678910111213141516function curry(fn) &#123; const slice = Array.prototype.slice; let savedArgs = slice.call(arguments, 1);//ÂâîÈô§Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÔºàfnÔºâ, Â∞ÜÁ±ªÊï∞ÁªÑÂØπË±°ËΩ¨Âåñ‰∏∫Êï∞ÁªÑ return function() &#123; let newArgs = slice.call(arguments); let args = [...savedArgs, ...newArgs]; return fn.apply(null, rags); &#125;&#125;//ÂÆö‰πâ‰∏Ä‰∏™ÊôÆÈÄöÂáΩÊï∞function add(x, y, z) &#123; return x + y + z&#125;//curryÂåñcurry(add, 1)(2, 3) // 6 ‰ΩïÊó∂‰ΩøÁî®CurryÂåñÂΩìÊ≠£Âú®Ë∞ÉÁî®Âêå‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂπ∂‰∏î‰º†ÈÄíÁöÑÂèÇÊï∞Â§ßÂ§öÈÉΩÊòØÁõ∏ÂêåÁöÑÔºåÈÇ£‰πàËØ•ÂáΩÊï∞ÂèØËÉΩÊòØÁî®‰∫écurryÂåñÁöÑ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÂÄôÈÄâÂèÇÊï∞„ÄÇÂèØ‰ª•ÈÄöËøáÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞ÈõÜÂêàÈÉ®ÂàÜÂ∫îÁî®Âà∞ÂáΩÊï∞‰∏≠Ôºå‰ªéËÄåÂä®ÊÄÅÂàõÂª∫‰∏Ä‰∏™Êñ∞ÂáΩÊï∞„ÄÇ ‰∏æ‰∏™ÁÆÄÂçïÁöÑüå∞Ôºö12345678910111213141516171819202122function curry(func, args = []) &#123; let arity = func.length; return function (..._args) &#123; _args.unshift(...args); if(_args.length &lt; arity) &#123; return curry.call(null, func, _args); &#125; return func(..._args); &#125;&#125;function checkFun(reg, str) &#123; return reg.test(str);&#125;let check = curry(checkFun);let checkPhone = check(/^1[34578]\d&#123;9&#125;$/);console.log(checkPhone('13997603799')) //truelet checkEmail = check(/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/);console.log(checkEmail('839862975@qq.com')) //true Âú®vueÊ∫êÁ†ÅÈáåÈù¢‰πüÊúâÂ§ßÈáèÂáΩÊï∞curryÂåñÁöÑÂ∫îÁî®„ÄÇÊØîÂ¶ÇvueÂú®Â∞ÜVNodeËøõË°åpatchÁîüÊàêÁúüÂÆûDOMÁöÑËøáÁ®ã‰∏≠Ôºå‰∏∫‰∫ÜÊäπÂπ≥Âπ≥Âè∞Â∑ÆÂºÇÔºàwebÂíåweexÔºâÔºåÂ∞ÜÂπ≥Âè∞Â∑ÆÂºÇÂåñÁöÑÂèÇÊï∞ÊèêÂâçÂõ∫ÂåñÔºåËøôÊ†∑‰∏çÁî®ÊØèÊ¨°Ë∞ÉÁî®patchÊñπÊ≥ïÁöÑÊó∂ÂÄôÈÉΩ‰º†ÈÄínodeOpsÂíåmodules‰∫Ü nodeOps Ë°®Á§∫ÂØπ ‚ÄúÂπ≥Âè∞ DOM‚Äù ÁöÑ‰∏Ä‰∫õÊìç‰ΩúÊñπÊ≥ïÔºåmodules Ë°®Á§∫Âπ≥Âè∞ÁöÑ‰∏Ä‰∫õÊ®°ÂùóÔºåÂÆÉ‰ª¨‰ºöÂú®Êï¥‰∏™ patch ËøáÁ®ãÁöÑ‰∏çÂêåÈò∂ÊÆµÊâßË°åÁõ∏Â∫îÁöÑÈí©Â≠êÂáΩÊï∞1234567891011//plantforms/web/runtime/patch.jsimport * as nodeOps from 'web/runtime/node-ops'import &#123; createPatchFunction &#125; from 'core/vdom/patch'import baseModules from 'core/vdom/modules/index'import platformModules from 'web/runtime/modules/index'// the directive module should be applied last, after all// built-in modules have been applied.const modules = platformModules.concat(baseModules)export const patch: Function = createPatchFunction(&#123; nodeOps, modules &#125;)]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ÂÜô‰∏Ä‰∏™webpack pluginÂêß]]></title>
    <url>%2F2019%2F05%2F24%2Fwebpack-plugin%2F</url>
    <content type="text"><![CDATA[‰ªÄ‰πàÊòØpluginÔºüwebpackÂú®ËøêË°åËøáÁ®ã‰∏≠‰ºöÂπøÊí≠ËÆ∏Â§ö‰∫ã‰ª∂ÔºåpluginÂèØ‰ª•ÁõëÂê¨Ëøô‰∫õ‰∫ã‰ª∂Ôºå‰ª•Âú®‰∏ÄÂÆöÁöÑÊó∂Êú∫ÂéªÊâßË°å‰∏Ä‰∫õ‰∫ãÊÉÖÂéªÊîπÂèòËæìÂá∫ÁªìÊûú„ÄÇ copyright-webpack-pluginÂÖàÂÜô‰∏™ÁÆÄÂçïÁöÑpluginÔºåÊúâ‰∏™Áõ¥ËßÇÁöÑÂç∞Ë±°ÂêéÂÜçÂÖ∑‰Ωì‰ªãÁªçÁõ∏ÂÖ≥ÂÜÖÂÆπ„ÄÇ Ëøô‰∏™plugin‰ºöÂú®webpackÊâìÂåÖËæìÂá∫ËµÑÊ∫êÂà∞ÁõÆÊ†áÊñá‰ª∂Â§π‰πãÂâçÁîüÊàê‰∏Ä‰∏™copyright.txtÊñá‰ª∂ 1234567891011121314151617181920212223// plugins/copyright-webpack-plugin.jsclass CopyrightWebpackPlugin &#123; constructor(options) &#123; this.content = options.content &#125; apply(compiler) &#123; compiler.hooks.compile.tap('CopyrightWebpackPlugin', (compilation) =&gt; &#123; console.log('compile') &#125;) compiler.hooks.emit.tapAsync('CopyrightWebpackPlugin', (compilation, cb) =&gt; &#123; // compilation: Êú¨Ê¨°ÊâìÂåÖÁöÑÂÜÖÂÆπ // compilation.assetsÔºö Êú¨Ê¨°ÊâìÂåÖÁîüÊàêÁöÑÊñá‰ª∂ // debugger compilation.assets['copyright.txt'] = &#123; source: () =&gt; this.content, size: () =&gt; this.content.length &#125; cb() &#125;) &#125;&#125;module.exports = CopyrightWebpackPlugin ‰ΩøÁî®Ôºö12345678910// webpack.config.jsconst CopyrightWebpackPlugin = require(&apos;./plugins/copyright-webpack-plugin&apos;)module.exports = &#123; plugins: [ new CopyrightWebpackPlugin(&#123; content: &apos;Copyright by xietian&apos; &#125;) ]&#125; Webpack ÂêØÂä®ÂêéÔºåÂú®ËØªÂèñÈÖçÁΩÆÁöÑËøáÁ®ã‰∏≠‰ºöÂÖàÊâßË°å new CopyrightWebpackPlugin(optionsÔºâÔºåÂàùÂßãÂåñ CopyrightWebpackPlugin Âπ∂Ëé∑ÂæóÂÖ∂ÂÆû‰æã„ÄÇ Âú®ÂàùÂßãÂåñ compiler ÂØπË±°ÂêéÔºåÂÜçË∞ÉÁî® CopyrightWebpackPlugin.apply (compilerÔºâ‰∏∫Êèí‰ª∂ÂÆû‰æã‰º†ÂÖ• compiler ÂØπË±°„ÄÇ Êèí‰ª∂ÂÆû‰æãÂú®Ëé∑ÂèñÂà∞ compiler ÂØπË±°ÂêéÔºåÂ∞±ÂèØ‰ª•ÈÄöËøá compiler.hooks.eventName.tapÔºàÊèí‰ª∂ÂêçÁß∞ÔºåÂõûË∞ÉÂáΩÊï∞ÔºâÁõëÂê¨Âà∞ Webpack ÂπøÊí≠ÁöÑ‰∫ã‰ª∂ÔºåÂπ∂‰∏îÂèØ‰ª•ÈÄöËøá compiler ÂØπË±°ÂéªÊìç‰Ωú Webpack compilerÂíåcompilationÂú®ÂºÄÂèë Plugin Êó∂ÊúÄÂ∏∏Áî®ÁöÑ‰∏§‰∏™ÂØπË±°Â∞±ÊòØ Compiler Âíå Compilation ÔºåÂÆÉ‰ª¨ÊòØ Plugin Âíå Webpack‰πãÈó¥ÁöÑÊ°•Ê¢Å„ÄÇCompiler Âíå Compilation ÁöÑÂê´‰πâÂ¶Ç‰∏ã: Compiler ÂØπË±°ÂåÖÂê´‰∫Ü Webpack ÁéØÂ¢ÉÁöÑÊâÄÊúâÈÖçÁΩÆ‰ø°ÊÅØÔºåÂåÖÂê´ options loaders pluginsÁ≠â‰ø°ÊÅØ„ÄÇËøô‰∏™ÂØπË±°Âú®WebpackÂêØÂä®Êó∂Ë¢´ÂÆû‰æãÂåñÔºåÂÆÉÊòØÂÖ®Â±ÄÂîØ‰∏ÄÁöÑÔºåÂèØ‰ª•ÁÆÄÂçïÂú∞Â∞ÜÂÆÉÁêÜËß£‰∏∫ Webpack ÂÆû‰æã Compilation ÂØπË±°ÂåÖÂê´‰∫ÜÂΩìÂâçÁöÑÊ®°ÂùóËµÑÊ∫ê„ÄÅÁºñËØëÁîüÊàêËµÑÊ∫ê„ÄÅÂèòÂåñÁöÑÊñá‰ª∂Á≠â„ÄÇÂΩì Webpack‰ª•ÂºÄÂèëÊ®°ÂºèËøêË°åÊó∂ÔºåÊØèÂΩìÊ£ÄÊµãÂà∞‰∏Ä‰∏™Êñá‰ª∂ÂèëÁîüÂèòÂåñÔºå‰æøÊúâ‰∏ÄÊ¨°Êñ∞ÁöÑ CompilationÂàõÂª∫„ÄÇCompilation ÂØπË±°‰πüÊèê‰æõ‰∫ÜÂæàÂ§ö‰∫ã‰ª∂ÂõûË∞É‰æõÊèí‰ª∂ËøõË°åÊâ©Â±ï„ÄÇÈÄöËøá Compilation‰πüËÉΩËØªÂèñÂà∞ Compiler ÂØπË±°„ÄÇ Compiler Âíå CompilationÈÉΩÁªßÊâøËá™Tapable ++Compiler Compilation ÁöÑÂå∫Âà´Âú®‰∫éÔºö Compiler ‰ª£Ë°®‰∫ÜÊï¥‰∏™ Webpack ‰ªéÂêØÂä®Âà∞ÂÖ≥Èó≠ÁöÑÁîüÂëΩÂë®ÊúüÔºåËÄå Compilation Âè™‰ª£Ë°®‰∏ÄÊ¨°Êñ∞ÁöÑÁºñËØë++„ÄÇ Plugin APIËøôÈáåÂè™‰ªãÁªç‰∏Ä‰∫õÂ∏∏Áî®ÁöÑPlugin ApI ËØªÂèñËæìÂá∫ËµÑÊ∫ê„ÄÅ‰ª£Á†ÅÂùó„ÄÅÊ®°ÂùóÂèäÂÖ∂‰æùËµñemit hookË°®Á§∫ËµÑÊ∫êÁºñËØëÂÆåÊØïÔºåÁîüÊàêËµÑÊ∫êÂà∞ output ÁõÆÂΩï‰πãÂâçÔºåÂú®ËøôÈáåÂèØ‰ª•‰øÆÊîπËæìÂá∫ÂÜÖÂÆπ12345678910111213141516171819class Plugin &#123; apply(compiler) &#123; compiler.hooks.emit.tapAsync('Plugin', (compilation, cb) =&gt; &#123; // compilation.chunksÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÁî®‰∫éÂ≠òÊîæÊâÄÊúâ‰ª£Á†ÅÂùó cimpilation.chunks.forEach(chunk =&gt; &#123; // ‰∏Ä‰∏™‰ª£Á†ÅÂùóÁî±Â§ö‰∏™Ê®°ÂùóÁªÑÊàêÔºåchunk.forEachModuleÈÅçÂéÜÂÖ∂‰∏≠ÁöÑÊ®°Âùó chunk.forEachModule(module =&gt; &#123; // module.fileDependenciesÊòØ‰∏Ä‰∏™Êï∞ÁªÑ, Â≠òÊîæÂΩìÂâçÊ®°ÂùóÁöÑÊâÄÊúâ‰æùËµñÁöÑÊñá‰ª∂Ë∑ØÂæÑ module.fileDependencies.forEach(filePath =&gt; &#123;&#125;) &#125;) // Webpack‰ºöÊ†πÊçÆChunkÁîüÊàêËæìÂá∫ÁöÑÊñá‰ª∂ËµÑÊ∫êÔºåÊØè‰∏™ Chunk ÈÉΩÂØπÂ∫î ‰∏Ä‰∏™Âèä‰ª•‰∏äÁöÑËæìÂá∫Êñá‰ª∂, ‰æãÂ¶ÇÂú® Chunk ‰∏≠ÂåÖÂê´ css Ê®°ÂùóÂπ∂‰∏î‰ΩøÁî®‰∫Ü ExtractTextPlugin Êó∂ÔºåËØ• Chunk Â∞±‰ºöÁîüÊàê js/css‰∏§‰∏™Êñá‰ª∂ &#125;) &#125;) &#125;&#125; ÁõëÂê¨Êñá‰ª∂ÂèòÂåñWebpack ‰ºö‰ªéÈÖçÁΩÆÁöÑÂÖ•Âè£Ê®°ÂùóÂá∫ÂèëÔºå‰æùÊ¨°ÊâæÂá∫ÊâÄÊúâ‰æùËµñÊ®°ÂùóÔºå ÂΩìÂÖ•Âè£Ê®°ÂùóÊàñËÄÖÂÖ∂‰æùËµñÁöÑÊ®°ÂùóÂèëÁîüÂèòÂåñÊó∂ Â∞±‰ºöËß¶Âèë‰∏ÄÊ¨°Êñ∞ÁöÑ Compilation watchRun hook: ‰∏Ä‰∏™Êñ∞ÁöÑÁºñËØë(compilation)Ëß¶Âèë‰πãÂêéÔºåÊâßË°å‰∏Ä‰∏™Êèí‰ª∂Ôºå‰ΩÜÊòØÊòØÂú®ÂÆûÈôÖÁºñËØëÂºÄÂßã‰πãÂâç ÂæÖÁª≠‚Ä¶]]></content>
      <categories>
        <category>Webpack</category>
      </categories>
      <tags>
        <tag>webpack4</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂÜô‰∏Ä‰∏™webpack loaderÂêß]]></title>
    <url>%2F2019%2F05%2F23%2Floader%2F</url>
    <content type="text"><![CDATA[‰ªÄ‰πàÊòØloaderÔºüLoaderÂèØ‰ª•ÁêÜËß£‰∏∫Ê®°ÂùóËΩ¨Êç¢Âô®Ôºå‰ΩúÁî®ÊòØÂ∞ÜÂéüÂÜÖÂÆπÊåâÁÖß‰∏ÄÂÆöÁöÑËßÑÂàôÁîüÊàêÊñ∞ÂÜÖÂÆπ ‰ª•Â§ÑÁêÜ.scssÊñá‰ª∂‰∏∫‰æãÔºö Â∞Ü.scssÊñá‰ª∂‰∫§Áªôscss-loaderÂ§ÑÁêÜÔºåËΩ¨Âåñ‰∏∫.cssÊñá‰ª∂ Â∞Ü.cssÊñá‰ª∂‰∫§Áªôcss-loaderÂ§ÑÁêÜÔºåÊâæÂá∫ÂÖ∂‰∏≠‰æùËµñÁöÑËµÑÊ∫êÔºåÂéãÁº©cssÁ≠â Â∞Ücss-loaderËæìÂá∫ÁöÑcss‰∫§Áªôstyle-loaderÂ§ÑÁêÜÔºåËΩ¨Êç¢ÊàêÈÄöËøáËÑöÊú¨Âä†ËΩΩÁöÑjs‰ª£Á†Å ÂØπÂ∫îwebpackÈÖçÁΩÆÂ¶Ç‰∏ãÔºö12345678910111213141516171819module.exports = &#123; module: &#123; rules: [ &#123; test: /\.scss/, use: [ &#123; loader: 'style-loader' &#125;, &#123; loader: 'css-loader', options: &#123; minimize: true &#125; &#125;, &#123; loader: 'scss-loader' &#125; ] &#125; ] &#125;&#125; Áî±Ê≠§ÂèØ‰ª•ÂèëÁé∞loaderÁöÑË¥£‰ªªÊòØÂçï‰∏ÄÁöÑÔºö‰∏Ä‰∏™loaderÂè™Ë¥üË¥£ÂÅö‰∏Ä‰ª∂‰∫ãÊÉÖÔºåÈÄöËøáÈìæÂºèË∞ÉÁî®ÁöÑÊñπÂºèÊù•ËææÂà∞Êàë‰ª¨Â§ÑÁêÜÊñá‰ª∂ÁöÑÁõÆÁöÑ„ÄÇÊàë‰ª¨Ëá™Â∑±Âú®ÁºñÂÜôloaderÁöÑÊó∂ÂÄô‰πüÈúÄË¶ÅÈÅµÂæ™Ëøô‰∏ÄÂéüÂàô„ÄÇ loaderÁöÑÊú¨Ë¥®webpackËøêË°å‰∫énode.js‰πã‰∏äÔºå‰∏Ä‰∏™loaderÊú¨Ë¥®‰∏äÂ∞±ÊòØ‰∏Ä‰∏™node.jsÊ®°ÂùóÔºåËøô‰∏™Ê®°ÂùóÈÄöËøámodule.exportsÂØºÂá∫‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂéüÂÜÖÂÆπ‰∏∫ËØ•ÂáΩÊï∞ÁöÑÂèÇÊï∞ÔºåÈÄöËøáÂ§ÑÁêÜÂêéËøîÂõûÊñ∞ÂÜÖÂÆπ loader API loader APIÁî®‰∫éwebpackÂíåloader‰πãÈó¥ËøõË°åÈÄö‰ø°Ôºàloader API ÊñáÊ°£Ôºâ Êé•‰∏ãÊù•Êàë‰ºöÂØπÂ∏∏Áî®ÁöÑloader apiËøõË°åËß£Èáä 1. Ëé∑ÂèñloaderÁöÑoptions1234567const loaderUtils = require('loader-utils')module.exports = function(source) &#123; // ‰ª•‰∏äÈù¢ÁöÑcss-loader‰∏∫‰æã, // ËøôÈáåÁöÑoptions: &#123; minimize: true &#125; const options = loaderUtils.getOptions(this) return source&#125; 2. ËøîÂõûÂÖ∂ÂÆÉÁªìÊûú‰∏äÈù¢ÁöÑ‰æãÂ≠êÊú™Â∞ÜÂÜÖÂÆπÂ§ÑÁêÜÂ∞±ËøîÂõû‰∫ÜÔºåÂú®Êüê‰∫õÊó∂ÂÄôÊàë‰ª¨ÂèØËÉΩÈúÄË¶ÅËøîÂõû‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑ‰ø°ÊÅØÔºåÊØîÂ¶ÇsourceMap„ÄÇ ‰ª•babel-loaderËΩ¨Âåñes6ËØ≠Ê≥ï‰∏∫‰æãÔºåÂÆÉËøòÈúÄË¶ÅËæìÂá∫ËΩ¨ÂåñÊàêes5ËØ≠Ê≥ïÂêéÂØπÂ∫îÁöÑsourceMapÔºå‰ª•‰æø‰∫éË∞ÉËØï‰ª£Á†ÅÔºö123module.exports = function(source) &#123; this.callback(null, source, sourceMap)&#125; Ê≤°ÈîôÔºåËøôÈáåÁöÑÂÖ≥ÈîÆÂ∞±ÊòØcallback apiÔºåÂÆÉÁöÑËØ¶ÁªÜ‰ΩøÁî®Â¶Ç‰∏ãÔºö123456this.callback( err: Error | null, content: string | Buffer, sourceMap?: SourceMap, meta?: any); ÂÖ≥‰∫ésourceMapÔºö ‰∏ÄËà¨Âè™Âú®ÂºÄÂèëÁéØÂ¢É‰∏ãÁîüÊàêÔºåÂõ†‰∏∫ÁîüÊàêsourceMapÂçÅÂàÜËÄóÊó∂ÔºåÁîü‰∫ßÁéØÂ¢ÉÂÖ≥Èó≠sourceMap‰ª•Âä†ÈÄüÊûÑÂª∫ÈÄüÂ∫¶„ÄÇthis.sourceMapAPIÂëäËØâloaderÂú®ÂΩìÂâçÊûÑÂª∫ÁéØÂ¢ÉÊòØÂê¶ÈúÄË¶ÅsourceMap„ÄÇÂ¶ÇÊûúÊàë‰ª¨ÁºñÂÜôÁöÑloader‰ºöÁîüÊàêSourcMapÔºåËØ∑Èì≠ËÆ∞Ëøô‰∏ÄÁÇπ 3. ÂêåÊ≠•‰∏éÂºÇÊ≠•ÂâçÈù¢ÁöÑÁ§∫‰æãÈÉΩÊòØÂêåÊ≠•ÁöÑÔºåÂ¶ÇÊûúÊàë‰ª¨Ë¶ÅÂú®loader‰∏≠ËøõË°åÂºÇÊ≠•Êìç‰ΩúÔºåÈÇ£‰πàÈúÄË¶Å‰ΩøÁî®this.asyncAPI123456module.exports = function(source) &#123; const callback = this.async() settimeout(() =&gt; &#123; callback(null, source, sourceMap) &#125;)&#125; 4. Â§ÑÁêÜ‰∫åËøõÂà∂Êï∞ÊçÆÂú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå Webpack ‰º†Áªô Loader ÁöÑÂéüÂÜÖÂÆπÈÉΩÊòØ UTF-8 Ê†ºÂºèÁºñÁ†ÅÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ‰ΩÜÂú®Êüê‰∫õÂú∫ÊôØ‰∏ã Loader ‰∏ç‰ºöÂ§ÑÁêÜÊñáÊú¨Êñá‰ª∂ÔºåËÄå‰ºöÂ§ÑÁêÜ‰∫åËøõÂà∂Êñá‰ª∂Â¶Ç file-loader ÔºåËøôÊó∂Â∞±ÈúÄË¶Å Wepack‰∏∫Loader‰º†ÂÖ•‰∫åËøõÂà∂Ê†ºÂºèÁöÑÊï∞ÊçÆ„ÄÇ‰∏∫Ê≠§ÔºåÊàë‰ª¨ÈúÄË¶ÅËøôÊ†∑ÁºñÂÜô Loader:123456module.exports = function(source) &#123; console.log(source instanceof Buffer) // true&#125;// ËøôË°å‰ª£Á†Å‰ΩøloaderËé∑ÂèñÁöÑsource‰∏∫‰∫åËøõÂà∂Êï∞ÊçÆmodule.exports.raw = true ÊöÇÊó∂Âè™‰ªãÁªçËøôÂá†‰∏™apiÔºåÊü•ÁúãÂÆòÊñπÊñáÊ°£‰∫ÜËß£Êõ¥Â§öÂêß„ÄÇ Êú¨Âú∞loaderÁöÑ‰ΩøÁî®Âú®ÂºÄÂèëËøáÁ®ã‰∏≠ÔºåÊàë‰ª¨ÈúÄË¶ÅÊú¨Âú∞Âä†ËΩΩloaderËÄå‰∏çÊòØÊääloader‰º†Âà∞npmÂÜç‰ΩøÁî®„ÄÇÂ¶Ç‰ΩïÂÅöÂà∞‰ª•loader: &#39;xxx-loader&#39;ÁöÑÂΩ¢Âºè‰ΩøÁî®ËÄå‰∏çÊòØloader: path.resolve(__dirname, &#39;./loaders/xxx-loader&#39;)ÔºåËøôÊó∂ÂÄôÂ∞±ÈúÄË¶ÅresolveLoaderÈÄâÈ°π‰∫ÜÔºåÂÆÉÂëäËØâwebpackÊÄé‰πàÂéªÊü•ÊâæloaderÔºö123456module.exports = &#123; resolveLoader: &#123; // Âú®Âì™ÈáåÊü•ÊâæloaderÔºåÊúâÂÖàÂêéÈ°∫Â∫è modules: ['node_modules', './loaders'] &#125;&#125; ÂΩìÁÑ∂ÔºåÈô§‰∫Ü‰∏äÈù¢ÁöÑÊñπÂºèÔºåÈÄöËøánpm linkÂ∞ÜÊú¨Âú∞loaderÁõÆÂΩïÂª∫Á´ã‰∏Ä‰∏™ËΩØËøûÊé•Âà∞node_modulesÔºå‰πüÂèØ‰ª•ËææÂà∞Áõ∏ÂêåÁöÑÁõÆÁöÑ„ÄÇ ‰ª•markerdown2vue-loader‰∏∫‰æã markerdown2vue-loaderÊòØÊàëÂÜôÁöÑ‰∏Ä‰∏™ÁÆÄÂçïÁöÑloaderÔºåÁî®‰∫éÂ∞ÜmarkdownËΩ¨‰∏∫vueÔºåÂΩìÊàë‰ª¨ÊÉ≥Áî®markdownÊù•ÁîüÊàêÁΩëÁ´ôÊó∂ÁâπÂà´ÊúâÁî®„ÄÇ‰∫ãÂÆû‰∏äÔºåÊàëÁöÑÁªÑ‰ª∂Â∫ìÊñáÊ°£UixÂ∞±ÊòØËøô‰πàÂπ≤ÁöÑ„ÄÇ ÊÄùË∑Ø Â∞Ü.mdËΩ¨Âåñ‰∏∫ÂØπÂ∫îÁöÑdomÁªìÊûÑÔºàÊØîÂ¶Ç## -&gt; h2„ÄÅ### -&gt; h3Á≠âÁ≠âÔºâ,ËøôÊó∂ÂÄôÂæóÂà∞ÁöÑdomÁªìÊûÑÂçÅÂàÜÊâÅÂπ≥ÔºåÊâÄ‰ª•ÊöÇ‰∏îÁß∞‰πã‰∏∫raw dom, Ëøô‰∏ÄËøáÁ®ã‰∏≠Ë¶ÅÂ§ÑÁêÜ‰∏ÄÁ≥ªÂàóÈóÆÈ¢òÔºåÂ¶ÇÔºöËØ≠Ê≥ïÈ´ò‰∫Æ„ÄÅÈîöÁÇπ„ÄÅËß£ÊûêemojiÁ≠â ÂÜçÂ∞Üraw domËøõË°åËá™ÂÆö‰πâÂàÜÂ±ÇÂ§ÑÁêÜÔºàÊØîÂ¶ÇÂú®ËØ•loader‰∏≠ÊàëÊòØÂà©Áî®h3Êù•ËøõË°åÂàíÂàÜÔºåÂú®ÂÖ∂Â§ñÂåÖ‰∏Ä‰∏™&lt;div class=&quot;card&quot;&gt;&lt;/div&gt;Ôºâ ÊúÄÂêéÂàôÊòØËøîÂõû&lt;template&gt;&lt;/template&gt;‰æõvue-loaderÂ§ÑÁêÜ ÂÖ∑‰ΩìÂÆûÁé∞ Â∞Ü.mdËΩ¨Âåñ‰∏∫ÂØπÂ∫îÁöÑdomÁªìÊûÑÊñ∞Âª∫index.jsÔºö 123456789101112131415161718192021222324module.exports = function (source) &#123; let options = loaderUtils.getOptions(this) || &#123;&#125;; this.cacheable &amp;&amp; this.cacheable(); options = &#123; wrapper, ...options &#125;; // ‰∏ªË¶ÅÂà©Áî®markdown-itËøô‰∏™Â∫ìÔºåÂêåÊó∂‰ΩøÁî®‰∫ÜÁõ∏ÂÖ≥Êèí‰ª∂ const parser = new MarkdownIt(&#123; html: true, highlight &#125;).use(anchor, &#123; permalink: true, permalinkBefore: true, permalinkSymbol: options.linkSymbol || 'üëâüèª', level: 1, slugify &#125;).use(emoji); // ÁªèËøáparser.render(source)Â§ÑÁêÜÂêé‰ºöÁîüÊàêraw domÔºå‰º†ÁªôwrapperÂÅöÂàÜÂ±ÇÂ§ÑÁêÜ return options.wrapper(parser.render(source));&#125;; Â∞Üraw domËøõË°åËá™ÂÆö‰πâÂàÜÂ±ÇÂ§ÑÁêÜ Êñ∞Âª∫card-wrapper.js:12345678910111213141516171819module.exports = function cardWrapper(html) &#123; // htmlÂ≠óÁ¨¶‰∏≤ËΩ¨Êç¢‰∏∫ h2/h3ÂàÜÁ±ªÁöÑÊï∞ÁªÑ const DIVIDE_ID = ':::'; const DIVIDE_ID_H2 = DIVIDE_ID + '&lt;h2'; const DIVIDE_ID_H3 = DIVIDE_ID + '&lt;h3'; const group = html.replace(/&lt;h3/g, DIVIDE_ID_H3).replace(/&lt;h2/g, DIVIDE_ID_H2).split(DIVIDE_ID); return group .map(fragment =&gt; &#123; // ‰ª•h3ÂàíÂàÜcard // h3ÂêéÁöÑÈùûh2/h3ËäÇÁÇπÈÉΩ‰ºöÊîæËøõcard if (fragment.indexOf('&lt;h3') !== -1) &#123; return `&lt;div class="card"&gt;$&#123;fragment&#125;&lt;/div&gt;`; &#125; return fragment; &#125;) .join('');&#125;; ËøîÂõûvue-template‰æõvue-loader‰ΩøÁî® wrapperÂáΩÊï∞Â¶Ç‰∏ãÔºö 1234567891011function wrapper(content) &#123; content = cardWrapper(content); content = encodeURIComponent(content); // ‰ΩøÁî®v-once‰øùËØÅÂÖ∂Âè™Ê∏≤Êüì‰∏ÄÊ¨° return ` &lt;template&gt; &lt;section v-html="decodeURIComponent(\`$&#123;content&#125;\`)" v-once /&gt; &lt;/template&gt; `;&#125; ÂÆûÈôÖ‰∏äÂà∞ËøôÈáåloaderÂ∞±ÂÜôÂÆå‰∫ÜÔºå‰ΩøÁî®ÁöÑËØùÂ∞±ÂæàÁÆÄÂçï‰∫ÜÔºö123456789&lt;template&gt; &lt;md /&gt;&lt;/template&gt;export default &#123; components: &#123; Md: () =&gt; import('./xxx.md') &#125;&#125; ÂÖ∂ÂÆÉÊàë‰ª¨ÂÅáËÆæÊúâËøôÊ†∑‰∏Ä‰∏™ÈúÄÊ±ÇÔºöÂú®Áé∞Êúâ‰∏öÂä°‰∏ãÂä†‰∏ä‰∏ÄÂ•óÈîôËØØÁõëÊéß‰∏éÂ§ÑÁêÜÊú∫Âà∂„ÄÇÊàë‰ª¨ÂèØ‰ª•Â∞ùËØïÁºñÂÜôËøôÊ†∑‰∏Ä‰∏™loaderÔºå‰∏∫Áõ∏Â∫îÁöÑ‰ª£Á†ÅÂùóÂ§ñÈù¢Âä†‰∏ätry‚Ä¶catchÔºåËøôÊ†∑Âú®‰∏ç‰øÆÊîπÂéüÊúâ‰ª£Á†ÅÁöÑÂü∫Á°Ä‰∏äËøòËÉΩÂÆûÁé∞Êàë‰ª¨ÁöÑÈúÄÊ±ÇÔºåÁÆÄÁõ¥ÂÜçÂêàÈÄÇ‰∏çËøá‰∫Ü„ÄÇ]]></content>
      <categories>
        <category>Webpack</category>
      </categories>
      <tags>
        <tag>webpack4</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Âü∫‰∫érustÊûÑÂª∫‰∏Ä‰∏™wasmÊ®°ÂùóÂπ∂‰∏îÂèëÂ∏ÉÂà∞npm]]></title>
    <url>%2F2019%2F05%2F22%2Frust-wasm%2F</url>
    <content type="text"><![CDATA[ÁõÆÁöÑÊú¨ÊñáËØïÂõæÂü∫‰∫érustÊûÑÂª∫‰∏Ä‰∏™wasmÊ®°ÂùóÂπ∂‰∏îÂèëÂ∏ÉÂà∞npmÔºÅ Â∑•ÂÖ∑ Âú®Ëøô‰πãÂâçÔºåÊàë‰ª¨ÈúÄË¶ÅÂÆâË£ÖÂ•ΩÂøÖË¶ÅÁöÑÂ∑•ÂÖ∑ [x] ÂÆâË£Örust ËøôÊ≠•‰∏çÂ§öËØ¥‰∫ÜÔºåÂÆâË£ÖÂêéÂú®ÁªàÁ´ØËæìÂÖ•rustc --versionÂ¶ÇÊûúÂá∫Áé∞‰ª•‰∏ãÊèêÁ§∫ËØ¥ÊòéÂÆâË£ÖÊàêÂäü: 1rustc 1.34.1 (fc50f328b 2019-04-24) ÂÆâË£ÖrustÁöÑÂêåÊó∂‰πü‰ºöÈªòËÆ§ÂÆâË£ÖcargoÔºåËøôÊòØrustÂÆòÊñπÁöÑÂåÖÁÆ°ÁêÜÂ∑•ÂÖ∑ÔºåÁ±ª‰ººnode‰∏≠ÁöÑnpm [x] ÂÆâË£Öwasm-pack ÂÆÉ‰ºöÂ∏ÆÂä©Êàë‰ª¨ÊääÊàë‰ª¨ÁöÑ‰ª£Á†ÅÁºñËØëÊàê WebAssembly Âπ∂Âà∂ÈÄ†Âá∫Ê≠£Á°ÆÁöÑ npm ÂåÖ 1cargo install wasm-pack Êñ∞Âª∫È°πÁõÆ1cargo new --lib hello_wasm ÊâßË°å‰∏äÈù¢ÂëΩ‰ª§‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞È°πÁõÆÔºåÁõÆÂΩïÁªìÊûÑÂæàÁÆÄÂçïÔºö123-- Cargo.toml-- src -- lib.rs Cargo.tomlÂ∞±ÊòØÈ°πÁõÆÈÖçÁΩÆÊñá‰ª∂ÔºåÊàë‰ª¨ÈúÄË¶ÅÂ¢ûÂä†‰∏Ä‰∫õÈÖçÁΩÆÔºö12345[lib]crate-type = ["cdylib"][dependencies]wasm-bindgen = "0.2" Êàë‰ª¨ÈúÄË¶Å‰æùËµñwasm-bindgenÔºåÂπ∂‰∏îÊåáÂÆö‰∫ÜÁâàÊú¨Âè∑Ôºà0.2.xÔºâ ÂêåÊó∂ÊåáÂÆö‰∫Ücrate-type=[&quot;cdylib&quot;],ÊÑèÊÄùÊòØÁºñËØëÊàê‰∏Ä‰∏™ÂèØ‰ª•Ë¢´ÂÖ∂ÂÆÉËØ≠Ë®ÄÂä†ËΩΩÁöÑÂä®ÊÄÅÂ∫ì„ÄÇ Êü•ÁúãÂÆòÊñπÊñáÊ°£ ÂÜôÁÇπ‰ª£Á†ÅÂú®src/lib.rs‰∏ãÔºö123456789101112131415extern crate wasm_bindgen;use wasm_bindgen::prelude::*;// ÂëäËØârustÈúÄË¶ÅÂØºÂÖ•ÁöÑjsÂáΩÊï∞ÔºåËøôÈáåÊàë‰ª¨ÊãøÂà∞‰∫Üwindow.alert#[wasm_bindgen]extern &#123; pub fn alert(s: &amp;str);&#125;// ÂØºÂá∫ÂèØ‰ª•Ë¢´jsË∞ÉÁî®ÁöÑÂáΩÊï∞greet()#[wasm_bindgen]pub fn greet(name: &amp;str) &#123; alert(&amp;format!("Hello, &#123;&#125;", name));&#125; ÊûÑÂª∫ÂåÖ1wasm-pack build --scope my_npm_username ËøêË°åwasm-pack buildÂ∏ÆÊàë‰ª¨ÂÅö‰∫Ü‰∏ÄÁ≥ªÂàóÁöÑ‰∫ãÊÉÖÔºö Â∞ÜrustÁºñËØëÊàêWebAssembly Âú®ÁîüÊàêÁöÑWebAssembly‰∏äËøêË°åwasm-bindgen, ‰ªéËÄå‰∫ßÁîü‰∏Ä‰∏™ÂåÖË£Ö‰∫ÜWebAssemblyÁöÑnpmÊ®°Âùó ÂàõÂª∫‰∫Ü‰∏Ä‰∏™pkgÊñá‰ª∂Â§πÔºåÈáåÈù¢ÂåÖÂê´‰∫ÜÁîüÊàêÁöÑ.wasmÂíå.jsÊñá‰ª∂ Ê†πÊçÆCargo.tomlÂú®pkg‰∏ãÁîüÊàêÂØπÂ∫îÁöÑpackage.jsonÊñá‰ª∂ Êã∑Ë¥ù README.md (Â¶ÇÊûúÂ≠òÂú®) Âà∞pkg‰∏ã ÂèëÂ∏ÉÂåÖÂà∞npm123cd pkgnpm publish . Âà∞ËøôÊ≠•‰ª•ÂêéÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Âú®npm‰∏äÁúãÂà∞ÂàöÂàöÂèëÂ∏ÉÁöÑÂåÖ‰∫ÜÔºåÂ¶ÇÊûú‰Ω†Âú®buildÁöÑÊó∂ÂÄôÊåáÂÆö‰∫Üscope, ÈÇ£‰πàÂåÖÂêçÂ∞±ÊòØ@my_npm_username/hello_wasm ‰ΩøÁî®ÂåÖ Êñ∞Âª∫‰∏Ä‰∏™ÂâçÁ´ØÂ∑•Á®ã 12345678910111213141516171819&#123; "name": "wasm-test", "version": "1.0.0", "description": "", "main": "index.js", "scripts": &#123; "dev": "webpack-dev-server" &#125;, "author": "", "license": "ISC", "dependencies": &#123; "@tian0o0/hello_wasm": "^0.1.0" &#125;, "devDependencies": &#123; "webpack": "^4.31.0", "webpack-cli": "^3.3.2", "webpack-dev-server": "^3.3.1" &#125;&#125; 12345678910// webpack.config.jsconst path = require('path');module.exports = &#123; entry: "./index.js", output: &#123; path: path.resolve(__dirname, "dist"), filename: "index.js", &#125;, mode: "development"&#125;; 1234567891011&lt;!--index.html--&gt;&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;hello-wasm example&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;script src="./index.js"&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; 1234// index.jsimport("@tian0o0/hello_wasm").then(module =&gt; &#123; module.greet("world");&#125;); ÂâçÁ´Ø‰ª£Á†ÅÂÜôÂ•ΩÂêéÔºö12npm installnpm run dev ÊâìÂºÄlocalhost:8080, ÁúãÂà∞ÂºπÊ°ÜÊèêÁ§∫Hello, worldÔºåËØ¥ÊòéÂ∑≤ÁªèÊàêÂäü‰∫Ü„ÄÇ rust-webpack-templateÂâçÈù¢Êàë‰ª¨ÈÄöËøá‰∏ÄÁ≥ªÂàóÊìç‰ΩúÂ∞ÜrustÁºñËØëÊàêwasmÂÜçÂèëÂ∏ÉÂà∞npmÊâçËÉΩ‰ΩøÁî®ÔºåÂçÅÂàÜ‰∏çÊñπ‰æøÔºåËøòÂ•ΩrustwasmÂÆòÊñπ‰∏∫Êàë‰ª¨Êèê‰æõ‰∫Ürust-webpack-template 1. ËøêË°å‰∏ãÈù¢ÂëΩ‰ª§ÊãâÂèñÊ®°Êùø1npm init rust-webpack your_app_name ËØ•È°πÁõÆÁöÑÂàùÂßãÁªìÊûÑÂ¶Ç‰∏ãÔºö123456789101112131415‚îú‚îÄ‚îÄ LICENSE-APACHE‚îú‚îÄ‚îÄ LICENSE-MIT‚îú‚îÄ‚îÄ README.md‚îú‚îÄ‚îÄ crate‚îÇ ‚îú‚îÄ‚îÄ Cargo.lock‚îÇ ‚îú‚îÄ‚îÄ Cargo.toml‚îÇ ‚îú‚îÄ‚îÄ pkg‚îÇ ‚îú‚îÄ‚îÄ src‚îÇ ‚îî‚îÄ‚îÄ target‚îú‚îÄ‚îÄ index.html‚îú‚îÄ‚îÄ js‚îÇ ‚îî‚îÄ‚îÄ index.js‚îú‚îÄ‚îÄ package-lock.json‚îú‚îÄ‚îÄ package.json‚îî‚îÄ‚îÄ webpack.config.js ÊâßË°å npm run buildÂ∞ÜÁîü‰∫ßdistÁõÆÂΩïÔºö12345‚îú‚îÄ‚îÄ dist‚îÇ ‚îú‚îÄ‚îÄ 1.bundle.js‚îÇ ‚îú‚îÄ‚îÄ 362e0215e53c5653c642.module.wasm‚îÇ ‚îú‚îÄ‚îÄ bundle.js‚îÇ ‚îî‚îÄ‚îÄ index.html ÊâßË°ånpm startÂ∞ÜÈÄöËøáwebpack-dev-serverÂºÄÂêØÊú¨Âú∞ÊúçÂä°Ôºå‰øÆÊîπsrc‰∏ãÁöÑrust‰ª£Á†ÅÔºå‰πüÂèØ‰ª•Ëé∑ÂæóÁÉ≠Êõ¥Êñ∞ÁöÑÊïàÊûúÔºåÂ§ßÂ§ßÊèêÈ´ò‰∫ÜÂºÄÂèëÊïàÁéá„ÄÇ ÊÄªÁªìÊú¨ÊñáÊâÄÂÅöÁöÑ‰∫ãÊÉÖÂçÅÂàÜÁÆÄÂçïÔºå‰∫ãÂÆû‰∏äÔºåÁõÆÂâçwasmÈÄÇÁî®ÁöÑÂú∫ÊôØÂπ∂‰∏çÂ§öÔºåÊØîÂ¶ÇÔºöÂõæÂÉèÂ§ÑÁêÜ„ÄÅÈü≥ËßÜÈ¢ëÂ§ÑÁêÜ„ÄÅh5Ê∏∏ÊàèÁ≠âÈúÄË¶ÅÂú®ÂâçÁ´ØËøõË°åÂ§çÊùÇËøêÁÆóÁöÑÂú∫ÊôØÔºåÂ∏åÊúõ‰ª•ÂêéËÉΩÊúâÊú∫‰ºöÂú®È°πÁõÆ‰∏≠ÂÆûÊàò„ÄÇ]]></content>
      <categories>
        <category>wasm</category>
      </categories>
      <tags>
        <tag>rust</tag>
        <tag>wasm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂÅö‰∏Ä‰∏™chromeÊâ©Â±ïÂêß]]></title>
    <url>%2F2019%2F03%2F20%2Fchrome-extension%2F</url>
    <content type="text"><![CDATA[TO DOËøòÊ≤°ÊúâÂ•ΩÁöÑÁÇπÂ≠ê]]></content>
      <categories>
        <category>ÊùÇË∞à</category>
      </categories>
      <tags>
        <tag>chrome</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[webpack‰ºòÂåñ‰πãÈÅì]]></title>
    <url>%2F2018%2F10%2F25%2Fwebpack%2F</url>
    <content type="text"><![CDATA[‰ºòÂåñ1.Áº©Â∞èÊñá‰ª∂ÊêúÁ¥¢ËåÉÂõ¥1.1‰ºòÂåñloaderÈÖçÁΩÆ Áî±‰∫é Loader ÂØπÊñá‰ª∂ÁöÑËΩ¨Êç¢Êìç‰ΩúÂæàËÄóÊó∂ÔºåÊâÄ‰ª•ÈúÄË¶ÅËÆ©Â∞ΩÂèØËÉΩÂ∞ëÁöÑÊñá‰ª∂Ë¢´ Loader ÁêÜ„ÄÇ ÈÄöËøátest„ÄÅinclude„ÄÅexcludeÂéªÁ°ÆÂÆöÂì™‰∫õÊñá‰ª∂ÈúÄË¶ÅË¢´Â§ÑÁêÜ123456789101112//‰ª•babel-loader‰∏∫‰æãÔºömodule.exports = &#123; module: &#123; rules: [ &#123; test: /.js$/, use: ['babel-loader?cacheDirectory'], include: path.resolve(__dirname, 'src') &#125; ] &#125;&#125; 1.2‰ºòÂåñresolve.modulesÈÖçÁΩÆ resolve.modulesÁî®‰∫éÈÖçÁΩÆwebpackÂéªÂì™‰∫õÁõÆÂΩïÂØªÊâæ‰∏âÊñπÊ®°Âùó ÈªòËÆ§ÂÄº‰∏∫Ôºö[‚Äònode_modules]„ÄÇ Âê´‰πâÊòØÂÖàÂéªÂΩìÂâçÁõÆÂΩïÁöÑ node_modules ÁõÆÂΩï‰∏ãÂéªÊâæÊàë‰ª¨ÊÉ≥ÊâæÁöÑÊ®°ÂùóÔºåÂ¶ÇÊûúÊ≤°ÊâæÂà∞ Â∞±Âéª‰∏ä‰∏ÄÁ∫ßÁõÆÂΩï./node_modules‰∏≠ÊâæÔºåÂÜçÊ≤°ÊúâÂ∞±Âéª ../../node_modules ‰∏≠ÊâæÔºå‰ª•Ê≠§Á±ªÊé® ËøôÂíå node.js ÁöÑÊ®°ÂùóÂØªÊâæÊú∫Âà∂ÂæàÁõ∏‰ºº„ÄÇ ÂΩìÂÆâË£Ö ÁöÑÁ¨¨‰∏âÊñπÊ®°ÂùóÈÉΩÊîæÂú®È°πÁõÆÊ†πÁõÆÂΩïÁöÑ node modules ÁõÆÂΩï‰∏ãÊó∂ÔºåÂ∞±Ê≤°ÊúâÂøÖË¶ÅÊåâÁÖßÈªòËÆ§ ÁöÑÊñπÂºèÂéª‰∏ÄÂ±ÇÂ±ÇÂú∞ÂØªÊâæÔºåÂèØ‰ª•ÊåáÊòéÂ≠òÊîæÁ¨¨‰∏âÊñπÊ®°ÂùóÁöÑÁªùÂØπË∑ØÂæÑÔºå‰ª•ÂáèÂ∞ëÂØªÊâæ12345module.exports = &#123; resolve: &#123; modules: [path.resolve(__dirname, 'node_modules')] &#125;&#125; 1.3‰ºòÂåñresolve.mainFieldÈÖçÁΩÆ Âú®ÂÆâË£ÖÁöÑÁ¨¨‰∏âÊñπÊ®°Âùó‰∏≠ÈÉΩ‰ºöÊúâ‰∏Ä‰∏™ package.json Êñá‰ª∂ÔºåÁî®‰∫éÊèèËø∞Ëøô‰∏™Ê®°ÂùóÁöÑÂ±ûÊÄßÂÖ∂‰∏≠ÁöÑÊüê‰∫õÂ≠óÊÆµÁî®‰∫éÊèèËø∞ÂÖ•Âè£Êñá‰ª∂Âú®Âì™ÈáåÔºå resolve.mainFieldsÁî®‰∫éÈÖçÁΩÆÈááÁî®Âì™‰∏™Â≠óÊÆµ‰Ωú‰∏∫ÂÖ•Âè£Êñá‰ª∂ÁöÑÊèèËø∞ ÂèØ‰ª•Â≠òÂú®Â§ö‰∏™Â≠óÊÆµÊèèËø∞ÂÖ•Âè£Êñá‰ª∂ÁöÑÂéüÂõ†ÊòØÔºåÊüê‰∫õÊ®°ÂùóÂèØ‰ª•ÂêåÊó∂Áî®‰∫éÂ§ö‰∏™ÁéØÂ¢É‰∏≠ÔºåÈíàÂØπ‰∏çÂêåÁöÑËøêË°åÁéØÂ¢ÉÈúÄË¶Å‰ΩøÁî®‰∏çÂêåÁöÑ‰ª£Á†Å„ÄÇ‰ª• isomorphic-fetch ( https://github.corn/matthewandrews/isomorphic-fetchÔºâ‰∏∫‰æãÔºåÂÆÉÊòØ fetch API ( https://developer.mozilla.org/zh-CN/docs/Web/APl/Fetch_API) ÁöÑ‰∏Ä‰∏™ÂÆûÁé∞Ôºå‰ΩÜÂèØÂêåÊó∂Áî®‰∫éÊµèËßàÂô®Âíå Node.js ÁéØÂ¢É Âú®ÂÆÉÁöÑ package. jsoŒ∑‰∏≠Â∞±Êúâ‰∏§‰∏™ÂÖ•Âè£Êñá‰ª∂ÊèèËø∞Â≠óÊÆµÔºö1234&#123;"browser":‚Äùfetch-npm-browserify.js‚Äù,"main":‚Äùfetch-npm-node.js ‚Äù&#125; isomo hic-fetch Âú®‰∏çÂêåÁöÑËøêË°åÁéØÂ¢É‰∏ã‰ΩøÁî®‰∏çÂêåÁöÑ‰ª£Á†ÅÔºåÊòØÂõ†‰∏∫ fetch API ÁöÑÂÆûÁé∞Êú∫Âà∂‰∏çÊ†∑ÔºåÂú®ÊµèËßàÂô®‰∏≠ÈÄöËøáÂéüÁîüÁöÑ fetch ÊàñËÄÖ XMLHttpRequest ÂÆûÁé∞ÔºåÂú® Node. j ÈÄöËøáhttp Ê®°ÂùóÂÆûÁé∞„ÄÇ resolve.mainFields ÁöÑÈªòËÆ§ÂÄºÂíåÂΩìÂâçÁöÑ target ÈÖçÁΩÆÊúâÂÖ≥Á≥ªÔºåÂØπÂ∫îÁöÑÂÖ≥Á≥ªÂ¶Ç‰∏ã„ÄÇ target web ÊàñËÄÖ webworker Êó∂ÔºåÂÄºÊòØÔºª‚Äùbrowser ‚ÄùÔºå‚Äù module ‚ÄùÔºå‚Äùma in ÔºΩ„ÄÇ target ‰∏∫ÂÖ∂‰ªñÊÉÖÂÜµÊó∂ÔºåÂÄºÊòØÔºª ‚Äúmodule ‚ÄùÔºå‚Äùmain ‚ÄùÔºΩ„ÄÇ ‰ª•target Á≠â‰∫é web ‰∏∫‰æãÔºå Webpack ‰ºöÂÖàÈááÁî®Á¨¨‰∏âÊñπÊ®°Âùó‰∏≠ÁöÑ browser ÂÆáÊÆµÂéªÂØªÊâæÊ®°ÂùóÁöÑÂÖ•Âè£ Êñá‰ª∂ÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®ÔºåÂ∞±ÈááÁî® module Â≠óÊÆµÔºå‰ª•Ê≠§Á±ªÊé®„ÄÇ‰∏∫‰∫ÜÂáèÂ∞ëÊêúÁ¥¢Ê≠•È™§ÔºåÂú®ÊòéÁ°ÆÁ¨¨ ÊñπÊ®°ÂùóÁöÑÂÖ•Âè£Êñá‰ª∂ÊèèËø∞Â≠óÊÆµÊó∂ÔºåÊàë‰ª¨ÂèØ‰ª•Â∞ÜÂÆÉËÆæÁΩÆÂæóÂ∞ΩÈáèÂ∞ë„ÄÇ Áî±‰∫éÂ§ßÂ§öÊï∞Á¨¨‰∏âÊñπÊ®°ÂùóÈÉΩÈááÁî® main ÂÆáÊÆµÂéªÊèèËø∞ÂÖ•Âè£Êñá‰ª∂ÁöÑ‰ΩçÁΩÆÔºåÊâÄ‰ª•ÂèØ‰ª•ËøôÊ†∑ÈÖçÁΩÆ:12345module.exports = &#123; resolve: &#123; mainFields: ['main'] &#125;&#125; 1.4‰ºòÂåñresolve.alias Âú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå Webpack ‰ºö‰ªéÂÖ•Âè£Êñá‰ª∂./node_modules/vue/dist/vue.jsÂºÄÂßãÈÄíÂΩíËß£ÊûêÂíåÂ§ÑÁêÜ‰æùËµñÁöÑÂá†ÂçÅ‰∏™Êñá‰ª∂ÔºåËøô‰ºöÊòØ‰∏Ä‰∏™ÂæàËÄóÊó∂ÁöÑÊìç‰Ωú ÈÄöËøáÈÖçÁΩÆ resolve. alias,ÂèØ‰ª•ËÆ© Webpack Âú®Â§ÑÁêÜ vue Êó∂ÔºåÁõ¥Êé•‰ΩøÁî®ÂçïÁã¨„ÄÅÂÆåÊï¥ÁöÑ vue.esm.js Êñá‰ª∂ Ôºå‰ªéËÄåË∑≥ËøáËÄóÊó∂ÁöÑÈÄíÂΩíËß£ÊûêÊìç‰Ωú1234567module.exports = &#123; resolve: &#123; alias: &#123; 'vue$': path.resolve(__dirname, './node_modules/vue/dist/vue.runtime.esm.js') &#125; &#125;&#125; ‰ΩÜÊòØÔºåÂØπÊüê‰∫õÂ∫ì‰ΩøÁî®Êú¨‰ºòÂåñÊñπÊ≥ïÂêéÔºå‰ºöÂΩ±ÂìçÂà∞ÂêéÈù¢Ë¶ÅËÆ≤ÁöÑ‰ΩøÁî® Tree-Sharking ÂéªÈô§Êó†Êïà‰ª£Á†ÅÁöÑ‰ºòÂåñÔºåÂõ†‰∏∫ÊâìÂåÖÂ•ΩÁöÑÂÆåÊï¥Êñá‰ª∂‰∏≠ÊúâÈÉ®ÂàÜ‰ª£Á†ÅÂú®Êàë‰ª¨ÁöÑÈ°πÁõÆ‰∏≠ÂèØËÉΩÊ∞∏ËøúÁî®‰∏ç‰∏ä„ÄÇ‰∏ÄËà¨ÂØπÊï¥‰ΩìÊÄßÊØîËæÉÂº∫ÁöÑÂ∫ìÈááÁî®Êú¨ÊñπÊ≥ï‰ºòÂåñÔºåÂõ†‰∏∫ÂÆåÊï¥Êñá‰ª∂‰∏≠ÁöÑ‰ª£Á†ÅÊòØ ‰∏™Êï¥‰ΩìÔºåÊØè Ë°åÈÉΩÊòØ‰∏çÂèØÊàñÁº∫ÁöÑ ‰ΩÜÊòØÂØπ‰∫é ‰∫õÂ∑•ÂÖ∑Á±ªÁöÑÂ∫ìÂ¶Ç lodash ÔºåÊàë‰ª¨ÁöÑÈ°πÁõÆ‰∏≠ÂèØËÉΩÂè™Áî®Âà∞‰∫ÜÂÖ∂‰∏≠Âá†‰∏™Â∑•ÂÖ∑ÂáΩÊï∞ÔºåÂ∞±‰∏çËÉΩ‰ΩøÁî®Êú¨ÊñπÊ≥ïÂéª‰ºòÂåñ‰∫ÜÔºåÂõ†‰∏∫Ëøô‰ºöÂØºËá¥Âú®Êàë‰ª¨ ÁöÑËæìÂá∫‰ª£Á†Å‰∏≠ÂåÖÂê´ÂæàÂ§öÊ∞∏Ëøú‰∏ç‰ºöË¢´ÊâßË°åÁöÑ‰ª£Á†Å„ÄÇ 1.5‰ºòÂåñresolve.extensions‰æãÂ¶ÇÔºö1extensions :[‚Äô .js ‚Äô,‚Äô.json ‚Äô] ‰πüÂ∞±ÊòØËØ¥ÔºåÂΩìÈÅáÂà∞ require ( ‚Äò. /data ‚ÄôÔºâ ËøôÊ†∑ÁöÑÂØºÂÖ•ËØ≠Âè• webpack ‰ºöÂÖàÂéªÂØªÊâæ.Ôºè data.js Êñá‰ª∂ÔºåÂ¶ÇÊûúËØ•Êñá‰ª∂‰∏çÂ≠òÂú®ÔºåÂ∞±ÂéªÂØªÊâæ data.json Êñá‰ª∂ÔºåÂ¶ÇÊûúËøòÊòØÊâæ‰∏çÂà∞Â∞±Êä•Èîô„ÄÇ Â¶ÇÊûúËøô‰∏™ÂàóË°®Ë∂äÈïøÔºåÊàñËÄÖÊ≠£Á°ÆÁöÑÂêéÁºÄË∂äÂæÄÂêéÔºåÂ∞±‰ºöÈÄ†ÊàêÂ∞ùËØïÁöÑÊ¨°Êï∞Ë∂äÂ§öÔºåÊâÄ‰ª•resolve .extensions ÁöÑÈÖçÁΩÆ‰πü‰ºöÂΩ±ÂìçÂà∞ÊûÑÂª∫ÁöÑÊÄßËÉΩ Âú®ÈÖçÁΩÆ resolve.extensionsÊó∂ÈúÄË¶ÅÈÅµÂÆà ‰ª•‰∏ãÂá†ÁÇπÔºå‰ª•ÂÅöÂà∞Â∞ΩÂèØËÉΩÂú∞‰ºòÂåñÊûÑÂª∫ÊÄßËÉΩ„ÄÇ ÂêéÁºÄÂ∞ùËØïÂàóË°®Ë¶ÅÂ∞ΩÂèØËÉΩÂ∞èÔºå‰∏çË¶ÅÂ∞ÜÈ°πÁõÆ‰∏≠‰∏çÂèØËÉΩÂ≠òÂú®ÁöÑÊÉÖÂÜµÂÜôÂà∞ÂêéÁºÄÂ∞ùËØïÂàóË°®‰∏≠„ÄÇ È¢ëÁéáÂá∫Áé∞ÊúÄÈ´òÁöÑÊñá‰ª∂ÂêéÁºÄË¶Å‰ºòÂÖàÊîæÂú®ÊúÄÂâçÈù¢Ôºå‰ª•ÂÅöÂà∞Â∞ΩÂø´ÈÄÄÂá∫ÂØªÊâæËøáÁ®ã„ÄÇ Âú®Ê∫êÁ†Å‰∏≠ÂÜôÂØºÂÖ•ËØ≠Âè•Êó∂ÔºåË¶ÅÂ∞ΩÂèØËÉΩÂ∏¶‰∏äÂêéÁºÄ ‰ªéËÄåÂèØ‰ª•ÈÅøÂÖçÂØªÊâæËøáÁ®ã„ÄÇ‰æãÂ¶ÇÂú®Á°ÆÂÆöÁöÑÊÉÖÂÜµ‰∏ãÂ∞Ü require ( ‚Äô. /data ‚ÄôÔºâ ÂÜôÊàê require Ôºà‚Äô. data.json‚ÄôÔºâ 1.6‰ºòÂåñmodule.noParse module.noParse ÈÖçÁΩÆÈ°πÂèØ Webpack ÂøΩÁï•ÂØπÈÉ®ÂàÜÊ≤°ÈááÁî®Ê®°ÂùóÂåñÁöÑÊñá‰ª∂ÁöÑÈÄíÂΩíËß£ÊûêÂ§ÑÁêÜÔºåËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÊòØËÉΩÊèêÈ´òÊûÑÂª∫ÊÄßËÉΩ„ÄÇÂéüÂõ†ÊòØ‰∏Ä‰∫õÂ∫ìÂ¶Ç jQueryÂ∫ûÂ§ßÂèàÊ≤°ÊúâÈááÁî®Ê®°ÂùóÂåñÊ†áÂáÜÔºåËÆ© Webpack Ëß£ÊûêËøô‰∫õÊñá‰ª∂Êó¢ËÄóÊó∂ÂèàÊ≤°ÊúâÊÑè‰πâ„ÄÇ Âú®ÂâçÈù¢ËÆ≤Ëß£‰ºòÂåñ resolve.alias ÈÖçÁΩÆÊó∂ËÆ≤Âà∞ÔºåÂçïÁã¨„ÄÅÂÆåÊï¥ÁöÑ vue.esm.js Êñá‰ª∂Ê≤°ÊúâÈááÁî®Ê®°ÂùóÂåñÔºåËÆ©Êàë‰ª¨ÈÄöËøáÈÖçÁΩÆ module.noParse ÂøΩÁï•ÂØπÂÆÉÁöÑÈÄíÂΩíËß£ÊûêÂ§ÑÁêÜÔºåÁõ∏ÂÖ≥ÁöÑ Webpack ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö12345module.exports = &#123; module: &#123; noParse: [/vue\.runtime\.esm\.js$/] &#125;&#125; 2.‰ΩøÁî®DllPlugin‰∏∫webÈ°πÁõÆÊé•ÂÖ•Âä®ÊÄÅÈìæÊé•Â∫ìÔºàdllÔºâ 1.Â∞ÜÁΩëÈ°µ‰æùËµñÁöÑÂü∫Á°ÄÊ®°ÂùóÊäΩÁ¶ªÂá∫Êù•ÔºåÊâìÂåÖÂà∞‰∏Ä‰∏™‰∏™ÂçïÁã¨ÁöÑÂä®ÊÄÅÈìæÊé•Â∫ì‰∏≠ „ÄÇÂú®‰∏Ä‰∏™Âä®ÊÄÅÈìæÊé•Â∫ì‰∏≠ÂèØ‰ª•ÂåÖÂê´Â§ö‰∏™Ê®°Âùó„ÄÇ 2.ÂΩìÈúÄË¶ÅÂØºÂÖ•ÁöÑÊ®°ÂùóÂ≠òÂú®‰∫éÊüê‰∏™Âä®ÊÄÅÈìæÊé•Â∫ì ‰∏≠Êó∂ÔºåËøô‰∏™Ê®°Âùó‰∏çËÉΩË¢´ÂÜçÊ¨°ÊâìÂåÖÔºåËÄåÊòØÂéªÂä®ÊÄÅÈìæÊé•Â∫ì‰∏≠Ëé∑Âèñ„ÄÇ 3Áî±‰∫éÂä®ÊÄÅÈìæÊé•Â∫ì‰∏≠Â§ßÂ§öÊï∞ÂåÖÂê´ÁöÑÊòØÂ∏∏Áî®ÁöÑÁ¨¨ ÊñπÊ®°ÂùóÔºå‰æãÂ¶Ç vue„ÄÅvue-router ÔºåÊâÄ‰ª•Âè™Ë¶Å‰∏çÂçáÁ∫ßËøô‰∫õÊ®°ÂùóÁöÑÁâàÊú¨ÔºåÂä®ÊÄÅÈìæÊé•Â∫ìÂ∞±‰∏çÁî®ÈáçÊñ∞ÁºñËØë„ÄÇ Âú®webpack‰∏≠ÔºåÈÄöËøá‰ª•‰∏ã‰∏§‰∏™Êèí‰ª∂ÂÆûÁé∞dllÔºö DllPlugin: Áî®‰∫éÊâìÂåÖÂá∫‰∏Ä‰∏™‰∏™ÂçïÁã¨ÁöÑÂä®ÊÄÅÈìæÊé•Â∫ìÊñá‰ª∂ DllReferencePlugin: Áî®‰∫éÂú®‰∏ªË¶ÅÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂºïÂÖ• DllPlugin Êèí‰ª∂ÊâìÂåÖÂ•ΩÁöÑÂä®ÊÄÅÈìæÊé•Â∫ìÊñá‰ª∂„ÄÇ ÂÆûÁé∞ËøáÁ®ãÔºö 1„ÄÅÂä®ÊÄÅÈìæÊé•Â∫ìÊñá‰ª∂Áõ∏ÂÖ≥ÁöÑÊñá‰ª∂ÈúÄË¶ÅÁî± ‰ªΩÁã¨Á´ãÁöÑÊûÑÂª∫ËæìÂá∫ÔºåÁî®‰∫é‰∏∫‰∏ªÊûÑÂª∫‰ΩøÁî®„ÄÇÊñ∞Âª∫webpack.dll.conf.js12345678910111213141516171819202122232425262728293031const path = require('path')const DllPlugin = require('webpack/lib/DllPlugin')function resolve(dir) &#123; return path.join(__dirname, '..', dir)&#125;module.exports = &#123; entry: &#123; vue: ['vue/dist/vue.runtime.esm.js', 'vue-router', 'vuex'], // vant: ['vant'] &#125;, output: &#123; path: resolve('dist'), filename: '[name].dll.js', // Â≠òÊîæÂä®ÊÄÅÈìæÊé•Â∫ìÁöÑÂÖ®Â±ÄÂèòÈáèÂêçÁß∞Ôºå_dll_vue library: '_dll_[name]' &#125;, plugins: [ new DllPlugin(&#123; /* *Âä®ÊÄÅÈìæÊé•Â∫ìÁöÑÂÖ®Â±ÄÂèòÈáèÂêçÁß∞ÔºåÈúÄË¶ÅÂíå output.library ‰∏≠ÁöÑ‰øùÊåÅ‰∏ÄËá¥ *ËØ•Â≠óÊÆµÁöÑÂÄº‰πüÂ∞±ÊòØËæìÂá∫ÁöÑ manifest json Êñá‰ª∂‰∏≠ name Â≠óÊÆµÁöÑÂÄº *‰æãÂ¶ÇÂú® react.manifest json ‰∏≠Â∞±Êúâ ‚Äùname‚ÄúÔºö‚Äù_dll_vue" */ name: '_dll_[name]', //ÊèèËø∞Âä®ÊÄÅÈìæÊé•Â∫ìÁöÑ manifest json Êñá‰ª∂ËæìÂá∫Êó∂ÁöÑË∑ØÂæÑ‰ª•ÂèäÊñá‰ª∂ÂêçÁß∞ path: resolve('dist/[name].manifest.json'), context: __dirname &#125;) ]&#125; 2„ÄÅÊ†πÊçÆwebpack.dll.conf.jsÊûÑÂª∫Âä®ÊÄÅÈìæÊé•Â∫ìÊñá‰ª∂ÂèäÂÖ∂ÊèèËø∞Êñá‰ª∂„ÄÇÂàõÂª∫build.dll.js123456789101112131415161718192021222324252627282930313233343536373839'use strict'require('./check-versions')()process.env.NODE_ENV = 'production'const ora = require('ora')const rm = require('rimraf')const path = require('path')const chalk = require('chalk')const webpack = require('webpack')const config = require('../config')const webpackConfig = require('./webpack.dll.conf')const spinner = ora('building for dll...')spinner.start()// rm(path.join(config.build.assetsRoot, config.build.assetsSubDirectory), err =&gt; &#123;// if (err) throw err // &#125;)webpack(webpackConfig, function (err, stats) &#123; spinner.stop() if (err) throw err process.stdout.write(stats.toString(&#123; colors: true, modules: false, children: false, chunks: false, chunkModules: false &#125;) + '\n\n') if (stats.hasErrors()) &#123; console.log(chalk.red(' Build failed with errors.\n')) process.exit(1) &#125; console.log(chalk.cyan(' Build complete.\n')) &#125;) ËøôÊ≠•‰ª•Âêé‰ºöÂú®distÁõÆÂΩï‰∏ã‰∫ßÁîüÔºö vue.dll.js vue.manifest.json (ÊèèËø∞vue.dll.js‰∏≠ÂåÖÂê´Âì™‰∫õÊ®°Âùó) 3„ÄÅ‰øÆÊîπwebpack.prod.conf.jsÔºåÂä†ÂÖ•DllReferencePlugin1234567891011const DllReferencePlugin = require('webpack/lib/DllReferencePlugin')//Âëä Webpack ‰ΩøÁî®‰∫ÜÂì™‰∫õÂä®ÊÄÅÈìæÊé•Â∫ìnew DllReferencePlugin(&#123;// ÊèèËø∞vueÂä®ÊÄÅÈìæÊé•Â∫ìÁöÑÊñá‰ª∂ÂÜÖÂÆπ manifest: require('../dist/vue.manifest.json'), context: __dirname&#125;),//Â¶ÇÊûúÊúâÂ§ö‰∏™Âä®ÊÄÅÈìæÊé•Â∫ìÊñá‰ª∂// new DllReferencePlugin(&#123;// manifest: ...// &#125;), 4„ÄÅÂú®Ê†πÁõÆÂΩïindex.html‰∏≠ÂºïÂÖ•vue.dll.js12345&lt;body&gt; &lt;div id="app"&gt;&lt;/div&gt; &lt;!-- built files will be auto injected --&gt; &lt;script src="./vue.dll.js"&gt;&lt;/script&gt;&lt;/body&gt; 5„ÄÅnpm run buildÊâßË°åÊûÑÂª∫ÔºåÂèØ‰ª•ÂèëÁé∞ÊûÑÂª∫ÈÄüÂ∫¶Êúâ‰∫ÜÊòéÊòæÁöÑÊèêÂçá 3.Tree Shaking Ë¶ÅËÆ© Tree Shaking Ê≠£Â∏∏Â∑•‰ΩúÁöÑÂâçÊèêÊòØÔºåÊèê‰∫§Áªô Webpack JavaScript ‰ª£Á†ÅÂøÖÈ°ªÈááÁî®‰∫Ü ES6 ÁöÑÊ®°ÂùóÂåñËØ≠Ê≥ï„ÄÇ Âõ†‰∏∫ ES6 Ê®°ÂùóÂåñËØ≠Ê≥ïÊòØÈùôÊÄÅÁöÑÔºàÂú®ÂØºÂÖ•„ÄÅÂØºÂá∫ËØ≠Âè•‰∏≠ÁöÑË∑ØÂæÑÊòØÈùôÊÄÅÁöÑÂ≠óÁ¨¶‰∏≤ÔºåËÄå‰∏î‰∏çËÉΩÊîæÂÖ•ÂÖ∂‰ªñ‰ª£Á†ÅÂùó‰∏≠ÔºâÔºåËøôËÆ© Webpack ÂèØ‰ª•ÁÆÄÂçïÂú∞ÂàÜÊûêÂá∫Âì™‰∫õexpo rt ÁöÑË¢´ import ‰∫Ü„ÄÇÂ¶ÇÊûúÈááÁî®‰∫Ü S5 ‰∏≠ÁöÑÊ®°ÂùóÂåñÔºå‰æãÂ¶Ç module.export={ ‚Ä¶ ÔΩù„ÄÅrequire (x+y Ôºâ„ÄÅ if (x) {require Ôºà‚Äô.Ôºè util ‚ÄôÔºâÔΩùÔºåÂàô Webpack Êó†Ê≥ïÂàÜÊûêÂá∫ÂèØ‰ª•ÂâîÈô§Âì™‰∫õ‰ª£Á†Å ÂÆûÁé∞ËøáÁ®ã: 1. ‰øÆÊîπ.babelrc1234567&#123;"presets": [ ["env", &#123; "modules": false //ÂÖ≥Èó≠ babel ÁöÑÊ®°ÂùóËΩ¨Êç¢ÂäüËÉΩÔºå‰øùÁïôÂéüÊú¨ÁöÑ ES6ËØ≠Ê≥ï„ÄÇ &#125;] ]&#125; 2. ‰ª•lodashÂ∫ì‰∏∫‰æã ÂæÄÂæÄÊàë‰ª¨Âú®È°πÁõÆ‰∏≠‰ΩøÁî®lodashÂè™‰ºöÁî®Âà∞ÂÖ∂Êèê‰æõÈÉ®ÂàÜÊñπÊ≥ïÔºåÂ¶ÇÊûúÊàë‰ª¨Ë¶Åtree shaking lodashÔºåÂ∫îËØ•ÂÆâË£Ölodash-esËÄå‰∏çÊòØlodashÔºåÂõ†‰∏∫lodashÂ∫ìÊú¨Ë∫´ÊòØcommonjsÁöÑÊ®°ÂùóÔºå‰∏çÊîØÊåÅtree shaking.ÂêåÊó∂ÊÉ≥Ë¶Å‰Ωøtree shakingÁîüÊïàÔºåËøòÈúÄË¶Å‰∏§‰∏™Êèí‰ª∂Ôºö babel-plugin-lodash lodash-webpack-plugin 12345// webpack.prod.conf.jsconst LodashModuleReplacementPlugin = require('lodash-webpack-plugin');plugins: [ new LodashModuleReplacementPlugin()] Âú®importÊó∂:12// import _ from 'lodash-es'import &#123; chunk &#125; from 'lodash-es' ËøôÊ†∑‰∏ÄÊù•Âú®ÊûÑÂª∫‰ª•ÂêélodashÂ∞±shakingÂà∞Êó†ÂΩ±Êó†Ë∏™‰∫Ü 2. ‰ª•vantÁªÑ‰ª∂Â∫ì‰∏∫‰æãÊü•ÁúãvantÁöÑpackage.json,ÂèëÁé∞Ôºö12"main": "lib/index.js", //commonjs"module": "es/index.js", //esm Âú®È°πÁõÆ‰∏≠‰ΩøÁî®Â§ßÈáèÁöÑÁ¨¨ ÊñπÂ∫ìÊó∂ÔºåÊàë‰ª¨‰ºöÂèëÁé∞ Tree Shaking ‰ºº‰πé‰∏çÁîüÊïà‰∫ÜÔºåÂéüÂõ†ÊòØÂ§ßÈÉ®ÂàÜNpm ‰∏≠ÁöÑ‰ª£Á†ÅÈÉΩÈááÁî®‰∫Ü CommonJS ËØ≠Ê≥ïÔºåËøôÂØºËá¥ Tree shaking Êó†Ê≥ïÊ≠£Â∏∏Â∑•‰ΩúËÄåÈôçÁ∫ßÂ§ÑÁêÜ„ÄÇ‰ΩÜÂπ∏ËøêÁöÑÊòØÔºåÊúâ‰∫õÂ∫ìËÄÉËôëÂà∞‰∫ÜËøô ÁÇπÔºåËøô‰∫õÂ∫ìÂú®ÂèëÂ∏ÉÂà∞ Npm ‰∏äÊó∂‰ºöÂêåÊó∂Êèê‰æõ‰∏§‰ªΩ‰ª£Á†ÅÔºå‰∏Ä‰ªΩÈáá CommonJs Ê®°ÂùóÂåñËØ≠Ê≥ïÔºå‰∏Ä‰ªΩÈááÁî® ES6 Ê®°ÂùóÂåñËØ≠Ê≥ï„ÄÇÂπ∂‰∏îÂú® package json Êñá‰ª∂‰∏≠Âà´ÊåáÂá∫Ëøô‰∏§‰ªΩ‰ª£Á†ÅÁöÑÂÖ•Âè£„ÄÇ ‰πãÂâç‰ªãÁªçËøá mainFields Áî®‰∫éÈÖçÁΩÆÈááÁî®Âì™‰∏™Â≠óÊÆµ‰Ωú‰∏∫Ê®°ÂùóÁöÑÂÖ•Âè£ÊèèËø∞„ÄÇ‰∏∫‰∫ÜTree Shaking vant ÁîüÊïàÔºåÈúÄË¶ÅÈÖçÁΩÆ Webpack ÁöÑÊñá‰ª∂ÂØªÊâæËßÑ Â¶Ç‰∏ã:12345module.exports= &#123; resolve: &#123; mainFields: ['module', 'main', 'browser'] &#125;&#125; ‰ª•‰∏äÈÖçÁΩÆÁöÑÂê´‰πâÊòØ‰ºòÂÖà‰ΩøÁî® module ‰Ωú‰∏∫ÂÖ•Âè£ÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®ÔºåÂ∞±‰ºöÈááÁî® browser ÊàñËÄÖ main Âπ∂Â∞ÜÂÖ∂‰Ωú‰∏∫ÂÖ•Âè£ Á§æÂå∫Á∫¶ÂÆöÔºöÁî® jsnext:main ‰Ωú‰∏∫ ES6 Ê®°ÂùóÂåñ‰ª£Á†ÅÁöÑÂÖ•Âè£ Ë¶ÅÂÆûÁé∞ÊåâÈúÄÂØºÂÖ•vantÁªÑ‰ª∂ÔºåÈúÄË¶Å‰∏Ä‰∏™Êèí‰ª∂Ôºöbabel-plugin-importÔºåÂêåÊó∂‰øÆÊîπ.babelrc:123456789&#123; "plugins": [ ["import": &#123; "libraryName": "vant", "libraryDirectory": "es", "style": true &#125;] ]&#125; ËøôÊ†∑ÔºåbuildÂêé‰πüËÉΩÂ§üÊäävant tree shaking 4. ‰ΩøÁî® Scope Hoisting scope hoistingÂáèÂ∞è‰ª£Á†ÅÊâìÂåÖÂêéÁöÑ‰ΩìÁßØÔºåÂπ∂‰∏îÂáèÂ∞ëÂáΩÊï∞‰ΩúÁî®ÂüüÔºåÂáèÂ∞èÂºÄÈîÄ(ÁõÆÂâçÊàëÊÑüËßâÂπ∂Ê≤°ÊúâËµ∑‰ΩúÁî®„ÄÇ„ÄÇ„ÄÇ) new webpack.optimize.ModuleConcatenationPlugin(), Âíåtree shaking‰∏ÄÊ†∑ÔºåScope Hoisting ‰æùËµñÊ∫êÁ†ÅÊó∂ ÈúÄÈááÁî® S6 Ê®°ÂùóÂåñËØ≠Ê≥ïÔºåËøòÈúÄË¶ÅÈÖçÁΩÆmainFields 5. ‰ΩøÁî®compression-webpack-pluginÂºÄÂêØgzip Âà©Áî®ËØ•Êèí‰ª∂ÁîüÊàê.gzÊñá‰ª∂ÔºåÂú®ÊúçÂä°Âô®ÂºÄÂêØgzipÁöÑÊÉÖÂÜµ‰∏ãÔºå‰ºö‰ºòÂÖàËøîÂõû.gzÊñá‰ª∂ ‰ª•vue-cli‰∏∫‰æãÔºö Âú®config/index.js‰∏≠Ôºö123456// Gzip off by default as many popular static hosts such as// Surge or Netlify already gzip all static assets for you.// Before setting to `true`, make sure to:// npm install --save-dev compression-webpack-pluginproductionGzip: true,productionGzipExtensions: ['js', 'css', 'png'], //‰Ω†ÊÉ≥Ë¶ÅgzipÁöÑÊñá‰ª∂Á±ªÂûã Âú®webpack.prod.conf.js‰∏≠Â∑≤ÁªèÊúâËøô‰πà‰∏ÄÊÆµ‰ª£Á†ÅÔºö123456789101112131415if (config.build.productionGzip) &#123; const CompressionWebpackPlugin = require('compression-webpack-plugin') webpackConfig.plugins.push( new CompressionWebpackPlugin(&#123; asset: '[path].gz[query]', algorithm: 'gzip', test: new RegExp( '\\.(' + config.build.productionGzipExtensions.join('|') + ')$' ), threshold: 10240, //Âè™Â§ÑÁêÜÂ§ß‰∫éÊ≠§Â§ßÂ∞è(10k)ÁöÑËµÑ‰∫ß„ÄÇ‰ª•byte‰∏∫Âçï‰Ωç ÈªòËÆ§‰∏∫0„ÄÇ minRatio: 0.8 //Âè™ÊúâÂéãÁº©ÁéáÊØîËøô‰∏™ÂÄºÂ∞èÁöÑËµÑÊ∫êÊâç‰ºöË¢´Â§ÑÁêÜ „ÄÇÈªòËÆ§‰∏∫0.8. &#125;) )&#125; Âú®buildÂêé‰ºöÁîüÊàêÂØπÂ∫îÁöÑ.gzÊñá‰ª∂ ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÂπ∂‰∏çÊòØÊâÄÊúâÁöÑÊñá‰ª∂ÈÉΩ‰ºöÁîüÊàêÂØπÂ∫îÁöÑgzipÊñá‰ª∂ÔºåÂõ†‰∏∫Êàë‰ª¨ËÆæÁΩÆ‰∫Üthreshold: 10240ÂíåminRatio: 0.8,Êñá‰ª∂Â§ßÂ∞èÂ∞è‰∫é10kÁöÑ‰∏ç‰ºöË¢´gzipÔºåÂêåÊó∂Âè™ÊúâÂéãÁº©ÁéáÊØî0.8Â∞èÁöÑËµÑÊ∫êÊâç‰ºöË¢´Â§ÑÁêÜÔºåÂê¶ÂàôÊØîËµ∑Áõ¥Êé•‰ΩøÁî®Ê≤°ÊúâgzipÁöÑÊñá‰ª∂ÔºåÊµèËßàÂô®‰ºöËä±Êõ¥Â§öÁöÑÊó∂Èó¥Áî®Êù•unzipËøô‰∫õÊñá‰ª∂ÔºåÂæó‰∏çÂÅøÂ§± Êú™ÂÆåÂæÖÁª≠¬∑¬∑¬∑]]></content>
      <categories>
        <category>Webpack</category>
      </categories>
      <tags>
        <tag>webpack4</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊÄªÁªì‰∏Ä‰∏ãjsÈáåÊìç‰ΩúÊï∞ÁªÑÁöÑÊñπÊ≥ïÂêß...]]></title>
    <url>%2F2018%2F07%2F05%2Farray%2F</url>
    <content type="text"><![CDATA[Êï∞ÁªÑÁöÑÊ†àÊñπÊ≥ïÂíåÈòüÂàóÊñπÊ≥ï123456789101112131415let arr = [1,2,3,4,5];//--Ê†àÊñπÊ≥ï//push(a,b,..,z)ÊñπÊ≥ïÂú®Êï∞ÁªÑÊúÄÂêéÈù¢ËøΩÂä†‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÖÉÁ¥†ÔºåËøîÂõû‰øÆÊîπÂêéÊï∞ÁªÑÁöÑÈïøÂ∫¶(6)arr.push(6);//Ê≠§Êó∂Êï∞ÁªÑ‰∏∫[1,2,3,4,5,6]//pop()ÊñπÊ≥ïÔºåËøîÂõûÂπ∂ÁßªÈô§Êï∞ÁªÑ‰∏≠ÁöÑÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÂÄº(6)arr.pop();//Ê≠§Êó∂Êï∞ÁªÑ‰∏∫[1,2,3,4,5]//--ÈòüÂàóÊñπÊ≥ï//shift()ÊñπÊ≥ïÔºåËøîÂõûÂπ∂ÁßªÈô§Êï∞ÁªÑ‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÂÄº(1)arr.shift();//Ê≠§Êó∂Êï∞ÁªÑ‰∏∫[2,3,4,5]//unshift(a,b,...,z)ÊñπÊ≥ïÂú®Êï∞ÁªÑÊúÄÂâçÈù¢ËøΩÂä†‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÖÉÁ¥†ÔºåËøîÂõû‰øÆÊîπÂêéÊï∞ÁªÑÁöÑÈïøÂ∫¶(5)arr.unshift(6);//Ê≠§Êó∂Êï∞ÁªÑ‰∏∫[6,2,3,4,5] ÈáçÊéíÂ∫èÊñπÊ≥ï reverse() sort() Ê≠£ÊòØÁî±‰∫éreverse()‰∏çÂ§üÁÅµÊ¥ªÔºåÊâÄ‰ª•Âá∫Áé∞‰∫Üsort()Ôºå‰ªñ‰ª¨ÂùáËøîÂõûÈáçÊñ∞ÊéíÂ∫èÂêéÁöÑÊï∞ÁªÑ Êìç‰ΩúÊñπÊ≥ï slice() //‰∏ç‰ºöÂΩ±ÂìçÂéüÊï∞ÁªÑ splice() //ÂèØ‰ª•ÂØπÊï∞ÁªÑËøõË°åÂà†Èô§„ÄÅÊèíÂÖ•„ÄÅÊõøÊç¢ÔºåËøîÂõû‰ªéÂéüÊï∞ÁªÑ‰∏≠Âà†Èô§È°πÁªÑÊàêÁöÑÊï∞ÁªÑ,‰ªñ‰ºöÂΩ±ÂìçÂéüÊï∞ÁªÑ ‰ΩçÁΩÆÊñπÊ≥ï indexOf() lastIndexOf() ËøîÂõûË¶ÅÊü•ÊâæÈ°πÂú®Êï∞ÁªÑ‰∏≠ÁöÑ‰ΩçÁΩÆÔºåÊâæ‰∏çÂà∞ÂàôËøîÂõû-11234const arr = [1,2,3,4,5,4,3,2,1]arr.indexOf(4) //3arr.lastIndexOf(4) // 5arr.indexOf(0) // -1 Êï∞ÁªÑÁöÑËø≠‰ª£Âô®ÊñπÊ≥ï‰∏çÁîüÊàêÊñ∞Êï∞ÁªÑÁöÑËø≠‰ª£Âô®ÊñπÊ≥ï123456789101112131415161718192021222324252627282930313233//1„ÄÅforEachÊñπÊ≥ïÔºàÊé•Êî∂‰∏Ä‰∏™ÂáΩÊï∞‰Ωú‰∏∫ÂèÇÊï∞Ôºâconst nums = [1,2,3,4,5];nums.forEach(item =&gt; &#123; console.log(item * item)&#125;);//1Ôºå4Ôºå9Ôºå16Ôºå25//2„ÄÅeveryÊñπÊ≥ïÔºàÊé•Êî∂‰∏Ä‰∏™ËøîÂõûÂÄº‰∏∫Â∏ÉÂ∞îÂÄºÁöÑÂáΩÊï∞ÔºåÂØπÊï∞ÁªÑ‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÂÖÉÁ¥†‰ΩøÁî®ËØ•ÂáΩÊï∞Ôºâconst evens=[2,4,6,8,10];const isAllEven = evens.every(item =&gt; &#123; return num % 2 === 0;&#125;); //ÂΩì‰∏î‰ªÖÂΩìÊï∞ÁªÑ‰∏≠ÁöÑÊâÄÊúâÁöÑÂÖÉÁ¥†ËøîÂõû‰∏∫ÁúüÔºåeveryÂáΩÊï∞Êâç‰ºöËøîÂõû‰∏∫Áúü//3„ÄÅsomeÊñπÊ≥ïÔºàÂè™Ë¶ÅÊï∞ÁªÑ‰∏≠Êúâ‰∏Ä‰∏™ÂÖÉÁ¥†‰ΩøÁî®ÊñπÊ≥ïËøîÂõû‰∏∫ÁúüÔºåsomeÂáΩÊï∞Â∞±‰ºöËøîÂõûÁúüÔºâ const nums = [1,2,3,5,7,9]; nums.some(item =&gt; &#123; return num % 2 === 0; &#125;); //true //4.reduceÊñπÊ≥ï //Áî®Ê≥ï‰∏ÄÔºö‰∏∫Êï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†Ê±ÇÂíå function add (currentTotal,currentValue) &#123; return currentTotal+currentValue; &#125; const nums = [1,2,3,4,5]; nums.reduce(add);//15 //Áî®Ê≥ï‰∫åÔºöÂ∞ÜÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†ËøûÊé•Êàê‰∏Ä‰∏™ÈïøÁöÑÂ≠óÁ¨¶‰∏≤ function linkStr (foreStr,currentStr) &#123; return foreStr + currentStr; &#125; const strings = [&quot;xietian&quot;,&quot;is&quot;,&quot;studying&quot;,&quot;javascript&quot;]; strings.reduce(linkStr); ÁîüÊàêÊñ∞Êï∞ÁªÑÁöÑËø≠‰ª£Âô®ÊñπÊ≥ï123456789101112131415//1.mapÊñπÊ≥ïÔºàÁ±ª‰ºº‰∫é‰∏çÁîüÊàêÊñ∞Êï∞ÁªÑ‰∏≠ÁöÑforEachÊñπÊ≥ïÔºâ //ÂèñÊï∞ÁªÑ‰∏≠ÊØè‰∏™ÂçïËØçÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÊØç const words = [&quot;xietian&quot;,&quot;is&quot;,&quot;studying&quot;,&quot;javascript&quot;]; const firstAlphas = words.map(item =&gt; &#123; return word[0].toUpperCase(); &#125;); firstAlphas.join(&quot;&quot;); //‰ΩøÁî®joinÂèØ‰ª•ÂéªÊéâËøûÊé•Êï∞ÁªÑÂÖÉÁ¥†ÁöÑÈÄóÂè∑ //2.filterÊñπÊ≥ïÔºàÁ±ª‰ºº‰∫éeveryÊñπÊ≥ïÔºâ //Á≠õÈÄâÂá∫Á¨¶ÂêàÊù°‰ª∂ÔºàÂç≥ËøîÂõûÂÄº‰∏∫trueÔºâÁöÑÂÖÉÁ¥† const nums=[1,2,4,6,8,10]; const evens = nums.filter(item =&gt; &#123; return num % 2 === 0; &#125;); ÂΩíÂπ∂ÊñπÊ≥ï reduce() //‰ªéÊï∞ÁªÑÁöÑÁ¨¨‰∏ÄÈ°πÂºÄÂßãÈÅçÂéÜ reduceRight() //‰ªéÊï∞ÁªÑÁöÑÊúÄÂêé‰∏ÄÈ°πÂºÄÂßãÈÅçÂéÜ ‰∏§‰∏™ÊñπÊ≥ïÈÉΩ‰ºöËø≠‰ª£Êï∞ÁªÑÁöÑÊØè‰∏ÄÈ°πÔºåÊûÑÂª∫‰∏Ä‰∏™ÊúÄÁªàÁöÑËøîÂõûÂÄº Êú™ÂÆåÂæÖÁª≠¬∑¬∑¬∑]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>array</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂéüÁîüJavascriptÂÆûÁé∞ÂÖ®Â±èÊªöÂä®ÊïàÊûú]]></title>
    <url>%2F2018%2F06%2F18%2F%E5%85%A8%E5%B1%8F%E6%BB%9A%E5%8A%A8%2F</url>
    <content type="text"><![CDATA[ÂéüÁêÜÂéüÁêÜÂæàÁÆÄÂçï: ÈÄöËøájsËÆæÁΩÆÂ§ñÂ±Çdiv wrapper(#wrap)ÁöÑÈ´òÂ∫¶‰∏∫ÊµèËßàÂô®ÂèØËßÜÂå∫ÁöÑÈ´òÂ∫¶ÔºåÂπ∂ËÆæÁΩÆoverflow:hidden; ËÆæÁΩÆÂÜÖÂ±Çdiv wrapper(#main)‰∏∫position:relativeÔºåÁÑ∂ÂêéÈÄöËøáÊªöËΩÆ‰∫ã‰ª∂ÊîπÂèòÂÖ∂topÂÄº„ÄÇ HTMLÁªìÊûÑÈ¶ñÂÖàÔºåHTMLÁªìÊûÑÂ∫îËØ•Êª°Ë∂≥‰∏ãÈù¢Ë¶ÅÊ±Ç 12345678&lt;div id="wrap"&gt; &lt;div id="main"&gt; &lt;div class="page page1"&gt;1&lt;/div&gt; &lt;div class="page page2"&gt;2&lt;/div&gt; &lt;div class="page page3"&gt;3&lt;/div&gt; &lt;div class="page page4"&gt;4&lt;/div&gt; &lt;/div&gt;&lt;/div&gt; CSS123456789101112131415161718192021222324#wrap &#123; overflow: hidden;&#125;#main &#123; position: relative; transition: all 1000ms ease;&#125;#page1 &#123; background: #E4E6CE;&#125;#page2 &#123; background: #6CE26C;&#125;#page3 &#123; background: #BF4938;&#125;#page4 &#123; background: #2932E1;&#125; ÊªöËΩÆ‰∫ã‰ª∂12345678910111213141516171819202122232425262728293031323334353637383940414243var pages = document.getElementsByClassName("page");var wrap = document.getElementById("wrap");var main = document.getElementById("main");var len = document.documentElement.clientHeight;wrap.style.height = len + "px";for (var i = 0; i &lt; pages.length; i++) &#123; pages[i].style.height = len + "px";&#125; if (navigator.userAgent.toLowerCase().indexOf("firefox") != -1) &#123;//ÁÅ´Áãê document.addEventListener("DOMMouseScroll", scrollFun); &#125; else if (document.addEventListener) &#123; document.addEventListener("mousewheel", scrollFun, false); &#125; else if (document.attachEvent) &#123;//IE document.attachEvent("onmousewheel", scrollFun); &#125; else &#123; document.onmousewheel = scrollFun; &#125; var startTime = 0; var endTime = 0; var now = 0; function scrollFun(e) &#123; startTime = new Date().getTime(); var event = e || window.event; var dir = event.detail || -event.wheelDelta; // &gt;0 Âêë‰∏ãÊªöÂä® //1sÂÜÖÂè™ËÉΩÊªöÂä®‰∏ÄÂ±è if (startTime - endTime &gt; 1000) &#123; console.log(startTime - endTime) if (dir &gt; 0 &amp;&amp; now &gt; -3 * len) &#123; now -= len; main.style.top = now + "px"; endTime = new Date().getTime(); &#125; else if (dir &lt; 0 &amp;&amp; now &lt; 0) &#123; now += len; main.style.top = now + "px"; endTime = new Date().getTime(); &#125; &#125; else &#123; console.log(startTime - endTime) event.preventDefault(); &#125; &#125;]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>fullpage</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vueÊúçÂä°Á´ØÊ∏≤Êüì]]></title>
    <url>%2F2018%2F05%2F20%2Fvue-ssr%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÈâ¥‰∫éSPAÁöÑÊòéÊòæÁöÑÁº∫ÁÇπÔºöÈ¶ñÂ±èÁôΩÂ±èÊó∂Èó¥ËæÉÈïø‰ª•ÂèäSEO‰∏çÂèãÂ•ΩÔºåÂõ†Ê≠§Âú®‰∏äËø∞ÈúÄÊ±Ç‰∏ãÔºåSSRÂçÅÂàÜÊúâÂøÖË¶Å„ÄÇ Ê≥®ÊÑè‰∫ãÈ°π Áî±‰∫éÁî®‰æãÂíåÂπ≥Âè∞ API ÁöÑÂ∑ÆÂºÇÔºåÂΩìËøêË°åÂú®‰∏çÂêåÁéØÂ¢É‰∏≠Êó∂ÔºåÊàë‰ª¨ÁöÑ‰ª£Á†ÅÂ∞Ü‰∏ç‰ºöÂÆåÂÖ®Áõ∏Âêå ÊúçÂä°Âô®‰∏äÁöÑÊï∞ÊçÆÂìçÂ∫î Âú®Á∫ØÂÆ¢Êà∑Á´ØÂ∫îÁî®Á®ãÂ∫è(client-only app)‰∏≠ÔºåÊØè‰∏™Áî®Êà∑‰ºöÂú®‰ªñ‰ª¨ÂêÑËá™ÁöÑÊµèËßàÂô®‰∏≠‰ΩøÁî®Êñ∞ÁöÑÂ∫îÁî®Á®ãÂ∫èÂÆû‰æã„ÄÇÂØπ‰∫éÊúçÂä°Âô®Á´ØÊ∏≤ÊüìÔºåÊàë‰ª¨‰πüÂ∏åÊúõÂ¶ÇÊ≠§ÔºöÊØè‰∏™ËØ∑Ê±ÇÂ∫îËØ•ÈÉΩÊòØÂÖ®Êñ∞ÁöÑ„ÄÅÁã¨Á´ãÁöÑÂ∫îÁî®Á®ãÂ∫èÂÆû‰æãÔºå‰ª•‰æø‰∏ç‰ºöÊúâ‰∫§ÂèâËØ∑Ê±ÇÈÄ†ÊàêÁöÑÁä∂ÊÄÅÊ±°Êüì(cross-request state pollution)„ÄÇ Âõ†‰∏∫ÂÆûÈôÖÁöÑÊ∏≤ÊüìËøáÁ®ãÈúÄË¶ÅÁ°ÆÂÆöÊÄßÔºåÊâÄ‰ª•Êàë‰ª¨‰πüÂ∞ÜÂú®ÊúçÂä°Âô®‰∏ä‚ÄúÈ¢ÑÂèñ‚ÄùÊï∞ÊçÆ(‚Äúpre-fetching‚Äù data) - ËøôÊÑèÂë≥ÁùÄÂú®Êàë‰ª¨ÂºÄÂßãÊ∏≤ÊüìÊó∂ÔºåÊàë‰ª¨ÁöÑÂ∫îÁî®Á®ãÂ∫èÂ∞±Â∑≤ÁªèËß£ÊûêÂÆåÊàêÂÖ∂Áä∂ÊÄÅ„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂ∞ÜÊï∞ÊçÆËøõË°åÂìçÂ∫îÂºèÁöÑËøáÁ®ãÂú®ÊúçÂä°Âô®‰∏äÊòØÂ§ö‰ΩôÁöÑÔºåÊâÄ‰ª•ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÁ¶ÅÁî®„ÄÇÁ¶ÅÁî®ÂìçÂ∫îÂºèÊï∞ÊçÆÔºåËøòÂèØ‰ª•ÈÅøÂÖçÂ∞Ü„ÄåÊï∞ÊçÆ„ÄçËΩ¨Êç¢‰∏∫„ÄåÂìçÂ∫îÂºèÂØπË±°„ÄçÁöÑÊÄßËÉΩÂºÄÈîÄ„ÄÇ ÁªÑ‰ª∂ÁîüÂëΩÂë®ÊúüÈí©Â≠êÂáΩÊï∞ Áî±‰∫éÊ≤°ÊúâÂä®ÊÄÅÊõ¥Êñ∞ÔºåÊâÄÊúâÁöÑÁîüÂëΩÂë®ÊúüÈí©Â≠êÂáΩÊï∞‰∏≠ÔºåÂè™Êúâ beforeCreate Âíå created ‰ºöÂú®ÊúçÂä°Âô®Á´ØÊ∏≤Êüì(SSR)ËøáÁ®ã‰∏≠Ë¢´Ë∞ÉÁî®„ÄÇËøôÂ∞±ÊòØËØ¥‰ªª‰ΩïÂÖ∂‰ªñÁîüÂëΩÂë®ÊúüÈí©Â≠êÂáΩÊï∞‰∏≠ÁöÑ‰ª£Á†ÅÔºà‰æãÂ¶Ç beforeMount Êàñ mountedÔºâÔºåÂè™‰ºöÂú®ÂÆ¢Êà∑Á´ØÊâßË°å„ÄÇ Ê≠§Â§ñËøòÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºå‰Ω†Â∫îËØ•ÈÅøÂÖçÂú® beforeCreate Âíå created ÁîüÂëΩÂë®ÊúüÊó∂‰∫ßÁîüÂÖ®Â±ÄÂâØ‰ΩúÁî®ÁöÑ‰ª£Á†ÅÔºå‰æãÂ¶ÇÂú®ÂÖ∂‰∏≠‰ΩøÁî® setInterval ËÆæÁΩÆ timer„ÄÇÂú®Á∫ØÂÆ¢Êà∑Á´Ø(client-side only)ÁöÑ‰ª£Á†Å‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•ËÆæÁΩÆ‰∏Ä‰∏™ timerÔºåÁÑ∂ÂêéÂú® beforeDestroy Êàñ destroyed ÁîüÂëΩÂë®ÊúüÊó∂Â∞ÜÂÖ∂ÈîÄÊØÅ„ÄÇ‰ΩÜÊòØÔºåÁî±‰∫éÂú® SSR ÊúüÈó¥Âπ∂‰∏ç‰ºöË∞ÉÁî®ÈîÄÊØÅÈí©Â≠êÂáΩÊï∞ÔºåÊâÄ‰ª• timer Â∞ÜÊ∞∏Ëøú‰øùÁïô‰∏ãÊù•„ÄÇ‰∏∫‰∫ÜÈÅøÂÖçËøôÁßçÊÉÖÂÜµÔºåËØ∑Â∞ÜÂâØ‰ΩúÁî®‰ª£Á†ÅÁßªÂä®Âà∞ beforeMount Êàñ mounted ÁîüÂëΩÂë®Êúü‰∏≠„ÄÇ ËÆøÈóÆÁâπÂÆöÂπ≥Âè∞(Platform-Specific) API ÈÄöÁî®‰ª£Á†Å‰∏çÂèØÊé•ÂèóÁâπÂÆöÂπ≥Âè∞ÁöÑ APIÔºåÂõ†Ê≠§Â¶ÇÊûú‰Ω†ÁöÑ‰ª£Á†Å‰∏≠ÔºåÁõ¥Êé•‰ΩøÁî®‰∫ÜÂÉè window Êàñ documentÔºåËøôÁßç‰ªÖÊµèËßàÂô®ÂèØÁî®ÁöÑÂÖ®Â±ÄÂèòÈáèÔºåÂàô‰ºöÂú® Node.js ‰∏≠ÊâßË°åÊó∂ÊäõÂá∫ÈîôËØØÔºåÂèç‰πã‰πüÊòØÂ¶ÇÊ≠§„ÄÇ ÂØπ‰∫éÂÖ±‰∫´‰∫éÊúçÂä°Âô®ÂíåÂÆ¢Êà∑Á´ØÔºå‰ΩÜÁî®‰∫é‰∏çÂêåÂπ≥Âè∞ API ÁöÑ‰ªªÂä°(task)ÔºåÂª∫ËÆÆÂ∞ÜÂπ≥Âè∞ÁâπÂÆöÂÆûÁé∞ÂåÖÂê´Âú®ÈÄöÁî® API ‰∏≠ÔºåÊàñËÄÖ‰ΩøÁî®‰∏∫‰Ω†ÊâßË°åÊ≠§Êìç‰ΩúÁöÑ library„ÄÇ‰æãÂ¶ÇÔºåaxios ÊòØ‰∏Ä‰∏™ HTTP ÂÆ¢Êà∑Á´ØÔºåÂèØ‰ª•ÂêëÊúçÂä°Âô®ÂíåÂÆ¢Êà∑Á´ØÈÉΩÊö¥Èú≤Áõ∏ÂêåÁöÑ API„ÄÇ ÂØπ‰∫é‰ªÖÊµèËßàÂô®ÂèØÁî®ÁöÑ APIÔºåÈÄöÂ∏∏ÊñπÂºèÊòØÔºåÂú®„ÄåÁ∫ØÂÆ¢Êà∑Á´Ø(client-only)„ÄçÁöÑÁîüÂëΩÂë®ÊúüÈí©Â≠êÂáΩÊï∞‰∏≠ÊÉ∞ÊÄßËÆøÈóÆ(lazily access)ÂÆÉ‰ª¨„ÄÇ Ëá™ÂÆö‰πâÊåá‰ª§Â§ßÂ§öÊï∞Ëá™ÂÆö‰πâÊåá‰ª§Áõ¥Êé•Êìç‰ΩúDOMÔºåÂõ†Ê≠§‰ºöÂú®ÊúçÂä°Âô®Á´ØÊ∏≤Êüì(SSR)ËøáÁ®ã‰∏≠ÂØºËá¥ÈîôËØØ„ÄÇÊúâ‰∏§ÁßçÊñπÊ≥ïÂèØ‰ª•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºö Êé®Ëçê‰ΩøÁî®ÁªÑ‰ª∂‰Ωú‰∏∫ÊäΩË±°Êú∫Âà∂ÔºåÂπ∂ËøêË°åÂú®„ÄåËôöÊãü DOM Â±ÇÁ∫ß(Virtual-DOM level)„ÄçÔºà‰æãÂ¶ÇÔºå‰ΩøÁî®Ê∏≤ÊüìÂáΩÊï∞(render function)Ôºâ„ÄÇ Â¶ÇÊûú‰Ω†Êúâ‰∏Ä‰∏™Ëá™ÂÆö‰πâÊåá‰ª§Ôºå‰ΩÜÊòØ‰∏çÊòØÂæàÂÆπÊòìÊõøÊç¢‰∏∫ÁªÑ‰ª∂ÔºåÂàôÂèØ‰ª•Âú®ÂàõÂª∫ÊúçÂä°Âô® renderer Êó∂Ôºå‰ΩøÁî® directives ÈÄâÈ°πÊâÄÊèê‰æõ‚ÄùÊúçÂä°Âô®Á´ØÁâàÊú¨(server-side version)‚Äù„ÄÇ Let‚Äôs goÊê≠Âª∫ËÑöÊâãÊû∂12// Âà©Áî®webpack-simpleÊê≠Âª∫‰∏Ä‰∏™ÁÆÄÂçïÁöÑËÑöÊâãÊû∂vue init webpack-simple vue-ssr srcÁõÆÂΩïÂèØËÉΩÈúÄË¶ÅÂÉè‰∏ãÈù¢ËøôÊ†∑Ôºö 12345678910src‚îú‚îÄ‚îÄ components‚îÇ ‚îú‚îÄ‚îÄ Foo.vue‚îÇ ‚îú‚îÄ‚îÄ Bar.vue‚îÇ ‚îî‚îÄ‚îÄ Baz.vue‚îú‚îÄ‚îÄ index.template.html # SSRÊ®°Êùø‚îú‚îÄ‚îÄ App.vue‚îú‚îÄ‚îÄ app.js # ÈÄöÁî® entry(universal entry)‚îú‚îÄ‚îÄ entry-client.js # ‰ªÖËøêË°å‰∫éÊµèËßàÂô®‚îî‚îÄ‚îÄ entry-server.js # ‰ªÖËøêË°å‰∫éÊúçÂä°Âô® ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Á´ØÈÄöÁî®ÂÖ•Âè£Ôºöapp.js123456789101112import Vue from 'vue'import App from './App.vue'// ÂØºÂá∫‰∏Ä‰∏™Â∑•ÂéÇÂáΩÊï∞ÔºåÁî®‰∫éÂàõÂª∫Êñ∞ÁöÑ// Â∫îÁî®Á®ãÂ∫è„ÄÅrouter Âíå store ÂÆû‰æãexport function createApp () &#123; const app = new Vue(&#123; // Ê†πÂÆû‰æãÁÆÄÂçïÁöÑÊ∏≤ÊüìÂ∫îÁî®Á®ãÂ∫èÁªÑ‰ª∂„ÄÇ render: h =&gt; h(App) &#125;) return &#123; app &#125;&#125; ÂÆ¢Êà∑Á´ØÂÖ•Âè£Ôºöentry-client.js ÂÆ¢Êà∑Á´Ø entry Âè™ÈúÄÂàõÂª∫Â∫îÁî®Á®ãÂ∫èÔºåÂπ∂‰∏îÂ∞ÜÂÖ∂ÊåÇËΩΩÂà∞ DOM ‰∏≠ 1234567import &#123; createApp &#125; from './app'const &#123; app &#125; = createApp()// ËøôÈáåÂÅáÂÆö App.vue Ê®°Êùø‰∏≠Ê†πÂÖÉÁ¥†ÂÖ∑Êúâ `id="app"`app.$mount('#app') ÊúçÂä°Á´ØÂÖ•Âè£Ôºöentry-server.js ÊúçÂä°Âô® entry ‰ΩøÁî® default export ÂØºÂá∫ÂáΩÊï∞ÔºåÂπ∂Âú®ÊØèÊ¨°Ê∏≤Êüì‰∏≠ÈáçÂ§çË∞ÉÁî®Ê≠§ÂáΩÊï∞„ÄÇÊ≠§Êó∂ÔºåÈô§‰∫ÜÂàõÂª∫ÂíåËøîÂõûÂ∫îÁî®Á®ãÂ∫èÂÆû‰æã‰πãÂ§ñÔºåÂÆÉ‰∏ç‰ºöÂÅöÂ§™Â§ö‰∫ãÊÉÖ - ‰ΩÜÊòØÁ®çÂêéÊàë‰ª¨Â∞ÜÂú®Ê≠§ÊâßË°åÊúçÂä°Âô®Á´ØË∑ØÁî±ÂåπÈÖç(server-side route matching)ÂíåÊï∞ÊçÆÈ¢ÑÂèñÈÄªËæë(data pre-fetching logic) 123456import &#123; createApp &#125; from './app'export default context =&gt; &#123; const &#123; app &#125; = createApp() return app&#125; ÊûÑÂª∫ÈÖçÁΩÆÔºàwebpackÔºâÂª∫ËÆÆÂ∞ÜÈÖçÁΩÆÂàÜ‰∏∫‰∏â‰∏™Êñá‰ª∂Ôºö webpack.base.config.js: ÂåÖÂê´Âú®‰∏§‰∏™ÁéØÂ¢ÉÂÖ±‰∫´ÁöÑÈÖçÁΩÆÔºå‰æãÂ¶ÇÔºåËæìÂá∫Ë∑ØÂæÑ(output path)ÔºåÂà´Âêç(alias)Âíå loader„ÄÇ webpack.client.config.js webpack.server.config.js webpack.client.config.jsÂíåwebpack.server.config.jsÔºåÂèØ‰ª•ÈÄöËøá‰ΩøÁî® webpack-merge Êù•ÁÆÄÂçïÂú∞Êâ©Â±ïwebpack.base.config.js webpack.base.config.js123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106var path = require('path')var webpack = require('webpack')module.exports = &#123; output: &#123; path: path.resolve(__dirname, '../dist'), publicPath: '/dist/' &#125;, module: &#123; rules: [ &#123; test: /\.css$/, use: [ 'vue-style-loader', 'css-loader' ], &#125;, &#123; test: /\.scss$/, use: [ 'vue-style-loader', 'css-loader', 'sass-loader' ], &#125;, &#123; test: /\.sass$/, use: [ 'vue-style-loader', 'css-loader', 'sass-loader?indentedSyntax' ], &#125;, &#123; test: /\.vue$/, loader: 'vue-loader', options: &#123; loaders: &#123; // Since sass-loader (weirdly) has SCSS as its default parse mode, we map // the "scss" and "sass" values for the lang attribute to the right configs here. // other preprocessors should work out of the box, no loader config like this necessary. 'scss': [ 'vue-style-loader', 'css-loader', 'sass-loader' ], 'sass': [ 'vue-style-loader', 'css-loader', 'sass-loader?indentedSyntax' ] &#125; // other vue-loader options go here &#125; &#125;, &#123; test: /\.js$/, loader: 'babel-loader', exclude: /node_modules/ &#125;, &#123; test: /\.(png|jpg|gif|svg)$/, loader: 'file-loader', options: &#123; name: '[name].[ext]?[hash]' &#125; &#125; ] &#125;, resolve: &#123; alias: &#123; 'vue$': 'vue/dist/vue.esm.js' &#125;, extensions: ['*', '.js', '.vue', '.json'] &#125;, devServer: &#123; historyApiFallback: true, noInfo: true, overlay: true &#125;, performance: &#123; hints: false &#125;, devtool: '#eval-source-map'&#125;if (process.env.NODE_ENV === 'production') &#123; module.exports.devtool = '#source-map' // http://vue-loader.vuejs.org/en/workflow/production.html module.exports.plugins = (module.exports.plugins || []).concat([ new webpack.DefinePlugin(&#123; 'process.env': &#123; NODE_ENV: '"production"' &#125; &#125;), new webpack.optimize.UglifyJsPlugin(&#123; sourceMap: true, compress: &#123; warnings: false &#125; &#125;), new webpack.LoaderOptionsPlugin(&#123; minimize: true &#125;) ])&#125; webpack.client.config.js Â¶ÇÊûú‰Ω†‰ΩøÁî® CommonsChunkPlugin(webpack4‰ΩøÁî®splitChunkPlugin)ÔºåËØ∑Á°Æ‰øù‰ªÖÂú®ÂÆ¢Êà∑Á´ØÈÖçÁΩÆ(client config)‰∏≠‰ΩøÁî®ÔºåÂõ†‰∏∫ÊúçÂä°Âô®ÂåÖÈúÄË¶ÅÂçïÁã¨ÁöÑÂÖ•Âè£ chunk1234567891011121314151617181920212223const webpack = require('webpack')const merge = require('webpack-merge')const baseConfig = require('./webpack.base.config.js')const VueSSRClientPlugin = require('vue-server-renderer/client-plugin')module.exports = merge(baseConfig, &#123; entry: './src/entry-client.js', output: &#123; filename: '[name].client.js' &#125;, plugins: [ // ÈáçË¶Å‰ø°ÊÅØÔºöËøôÂ∞Ü webpack ËøêË°åÊó∂ÂàÜÁ¶ªÂà∞‰∏Ä‰∏™ÂºïÂØº chunk ‰∏≠Ôºå // ‰ª•‰æøÂèØ‰ª•Âú®‰πãÂêéÊ≠£Á°ÆÊ≥®ÂÖ•ÂºÇÊ≠• chunk„ÄÇ // Ëøô‰πü‰∏∫‰Ω†ÁöÑ Â∫îÁî®Á®ãÂ∫è/vendor ‰ª£Á†ÅÊèê‰æõ‰∫ÜÊõ¥Â•ΩÁöÑÁºìÂ≠ò„ÄÇ new webpack.optimize.CommonsChunkPlugin(&#123; name: "manifest", minChunks: Infinity &#125;), // Ê≠§Êèí‰ª∂Âú®ËæìÂá∫ÁõÆÂΩï‰∏≠ // ÁîüÊàê `vue-ssr-client-manifest.json`„ÄÇ // new VueSSRClientPlugin() ]&#125;) webpack.client.config.js12345678910111213141516171819202122232425262728293031323334353637383940const merge = require('webpack-merge')const nodeExternals = require('webpack-node-externals')const baseConfig = require('./webpack.base.config.js')const VueSSRServerPlugin = require('vue-server-renderer/server-plugin')module.exports = merge(baseConfig, &#123; // Â∞Ü entry ÊåáÂêëÂ∫îÁî®Á®ãÂ∫èÁöÑ server entry Êñá‰ª∂ entry: '/path/to/entry-server.js', // ËøôÂÖÅËÆ∏ webpack ‰ª• Node ÈÄÇÁî®ÊñπÂºè(Node-appropriate fashion)Â§ÑÁêÜÂä®ÊÄÅÂØºÂÖ•(dynamic import)Ôºå // Âπ∂‰∏îËøò‰ºöÂú®ÁºñËØë Vue ÁªÑ‰ª∂Êó∂Ôºå // ÂëäÁü• `vue-loader` ËæìÈÄÅÈù¢ÂêëÊúçÂä°Âô®‰ª£Á†Å(server-oriented code)„ÄÇ target: 'node', // ÂØπ bundle renderer Êèê‰æõ source map ÊîØÊåÅ devtool: 'source-map', // Ê≠§Â§ÑÂëäÁü• server bundle ‰ΩøÁî® Node È£éÊ†ºÂØºÂá∫Ê®°Âùó(Node-style exports) output: &#123; libraryTarget: 'commonjs2' &#125;, // https://webpack.js.org/configuration/externals/#function // https://github.com/liady/webpack-node-externals // Â§ñÁΩÆÂåñÂ∫îÁî®Á®ãÂ∫è‰æùËµñÊ®°Âùó„ÄÇÂèØ‰ª•‰ΩøÊúçÂä°Âô®ÊûÑÂª∫ÈÄüÂ∫¶Êõ¥Âø´Ôºå // Âπ∂ÁîüÊàêËæÉÂ∞èÁöÑ bundle Êñá‰ª∂„ÄÇ externals: nodeExternals(&#123; // ‰∏çË¶ÅÂ§ñÁΩÆÂåñ webpack ÈúÄË¶ÅÂ§ÑÁêÜÁöÑ‰æùËµñÊ®°Âùó„ÄÇ // ‰Ω†ÂèØ‰ª•Âú®ËøôÈáåÊ∑ªÂä†Êõ¥Â§öÁöÑÊñá‰ª∂Á±ªÂûã„ÄÇ‰æãÂ¶ÇÔºåÊú™Â§ÑÁêÜ *.vue ÂéüÂßãÊñá‰ª∂Ôºå // ‰Ω†ËøòÂ∫îËØ•Â∞Ü‰øÆÊîπ `global`Ôºà‰æãÂ¶Ç polyfillÔºâÁöÑ‰æùËµñÊ®°ÂùóÂàóÂÖ•ÁôΩÂêçÂçï whitelist: /\.css$/ &#125;), // ËøôÊòØÂ∞ÜÊúçÂä°Âô®ÁöÑÊï¥‰∏™ËæìÂá∫ // ÊûÑÂª∫‰∏∫Âçï‰∏™ JSON Êñá‰ª∂ÁöÑÊèí‰ª∂„ÄÇ // ÈªòËÆ§Êñá‰ª∂Âêç‰∏∫ `vue-ssr-server-bundle.json` plugins: [ // new VueSSRServerPlugin() ]&#125;) ÊâìÂåÖ1.ÊâßË°å‰ª•‰∏ãÂëΩ‰ª§Ôºö12//ÁîüÊàêÂÆ¢Êà∑Á´ØÊâìÂåÖÊñá‰ª∂webpack --config ./build/webpack.client.config.js ‰ºöÂú®distÁõÆÂΩï‰∏ãÁîüÊàêÔºö main.client.js manifest.client.js 2.ÊâßË°å‰ª•‰∏ãÂëΩ‰ª§Ôºö12//ÁîüÊàêÊúçÂä°Á´ØÊâìÂåÖÊñá‰ª∂webpack --config ./build/webpack.server.config.js ‰ºöÂú®distÁõÆÂΩï‰∏ãÁîüÊàêÔºö main.server.js ‰øÆÊîπserver.js12345678910111213141516171819202122232425262728293031323334353637383940const Vue = require('vue')const express = require('express')const server = express()const renderer = require('vue-server-renderer').createRenderer(&#123; template: require('fs').readFileSync('./src/index.template.html', 'utf-8')&#125;)// const createApp = require('./src/app.js')// ÈÄöËøáÊúçÂä°Á´ØÊâìÂåÖÊñá‰ª∂main.server.jsÊù•ÂàõÂª∫appÂÆû‰æãconst createApp = require('./dist/main.server.js').default// Â∞ÜdistÊñá‰ª∂Â§π‰Ωú‰∏∫ÈùôÊÄÅËµÑÊ∫êÁõÆÂΩïserver.use('/dist', express.static('./dist'))server.get('*', (req, res) =&gt; &#123; const context = &#123; title: 'hello', meta: ` &lt;meta charset="utf-8"&gt; `, url: req.url &#125; // const app = new Vue(&#123; // data: &#123; // url: req.url // &#125;, // template: `&lt;div&gt;ËÆøÈóÆÁöÑ URL ÊòØÔºö &#123;&#123; url &#125;&#125;&lt;/div&gt;` // &#125;) // ‰∏çÂ∫îËØ•Áõ¥Êé•ÂàõÂª∫‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èÂÆû‰æãÔºåËÄåÊòØÂ∫îËØ•Êö¥Èú≤‰∏Ä‰∏™ÂèØ‰ª•ÈáçÂ§çÊâßË°åÁöÑÂ∑•ÂéÇÂáΩÊï∞Ôºå‰∏∫ÊØè‰∏™ËØ∑Ê±ÇÂàõÂª∫Êñ∞ÁöÑÂ∫îÁî®Á®ãÂ∫èÂÆû‰æã const app = createApp(context) renderer.renderToString(app, context).then(html =&gt; &#123; res.end(html) &#125;).catch(e =&gt; &#123; res.status(500).end('Internal Server Error') &#125;)&#125;)server.listen(8081) index.template.html‰∏≠ÂºïÂÖ•clientÁ´ØÊâìÂåÖÊñá‰ª∂123456789101112131415&lt;!DOCTYPE html&gt;&lt;html lang="zh"&gt;&lt;head&gt; &lt;title&gt;&#123;&#123;title&#125;&#125;&lt;/title&gt; &#123;&#123;&#123;meta&#125;&#125;&#125;&lt;/head&gt;&lt;body&gt; &lt;!--vue-ssr-outlet--&gt; &lt;script src="/dist/manifest.client.js"&gt;&lt;/script&gt; &lt;script src="/dist/main.client.js"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ÊâßË°å‰ª•‰∏ãÂëΩ‰ª§Ôºö12node server# supervisor server Â∞±ÂèØ‰ª•ÊàêÂäüËÆøÈóÆÂà∞vueÊ¨¢ËøéÈ°µÈù¢‰∫Ü Ë∑ØÁî±Âíå‰ª£Á†ÅÂàÜÂâ≤Âú®srcÁõÆÂΩï‰∏ãÂàõÂª∫router.js1234567891011121314151617import Vue from 'vue'import Router from 'vue-router'Vue.use(Router)export function createRouter () &#123; return new Router(&#123; mode: 'history', routes: [ &#123; path: '/hello/:id', // Âä®ÊÄÅÂØºÂÖ•ÁªÑ‰ª∂ÔºåÈúÄË¶ÅÂÆâË£Öbabel-preset-stage-2 component: () =&gt; import('./components/hello') &#125; ] &#125;)&#125; ‰øÆÊîπÈÄöÁî®ÂÖ•Âè£app.js1234567891011121314151617import Vue from 'vue'import App from './App.vue'import &#123;createRouter&#125; from './router'// ÂØºÂá∫‰∏Ä‰∏™Â∑•ÂéÇÂáΩÊï∞ÔºåÁî®‰∫éÂàõÂª∫Êñ∞ÁöÑ// Â∫îÁî®Á®ãÂ∫è„ÄÅrouter Âíå store ÂÆû‰æãexport function createApp () &#123; const app = new Vue(&#123; // Ê†πÂÆû‰æãÁÆÄÂçïÁöÑÊ∏≤ÊüìÂ∫îÁî®Á®ãÂ∫èÁªÑ‰ª∂„ÄÇ render: h =&gt; h(App), router &#125;) const router = createRouter() return &#123; app, router &#125;&#125; ‰øÆÊîπentry-client.js12345//ÊåÇËΩΩ app ‰πãÂâçË∞ÉÁî® router.onReady//Âõ†‰∏∫Ë∑ØÁî±Âô®ÂøÖÈ°ªË¶ÅÊèêÂâçËß£ÊûêË∑ØÁî±ÈÖçÁΩÆ‰∏≠ÁöÑÂºÇÊ≠•ÁªÑ‰ª∂ÔºåÊâçËÉΩÊ≠£Á°ÆÂú∞Ë∞ÉÁî®ÁªÑ‰ª∂‰∏≠ÂèØËÉΩÂ≠òÂú®ÁöÑË∑ØÁî±Èí©Â≠êrouter.onReady(() =&gt; &#123; app.$mount('#app')&#125;) Âú® entry-server.js ‰∏≠ÂÆûÁé∞ÊúçÂä°Âô®Á´ØË∑ØÁî±ÈÄªËæë123456789101112131415161718192021222324import &#123; createApp &#125; from './app'export default context =&gt; &#123; // Âõ†‰∏∫ÊúâÂèØËÉΩ‰ºöÊòØÂºÇÊ≠•Ë∑ØÁî±Èí©Â≠êÂáΩÊï∞ÊàñÁªÑ‰ª∂ÔºåÊâÄ‰ª•Êàë‰ª¨Â∞ÜËøîÂõû‰∏Ä‰∏™ PromiseÔºå // ‰ª•‰æøÊúçÂä°Âô®ËÉΩÂ§üÁ≠âÂæÖÊâÄÊúâÁöÑÂÜÖÂÆπÂú®Ê∏≤ÊüìÂâçÂ∞±Â∑≤ÁªèÂáÜÂ§áÂ∞±Áª™„ÄÇ return new Promise((resolve, reject) =&gt; &#123; const &#123; app, router &#125; = createApp() // ËÆæÁΩÆÊúçÂä°Âô®Á´Ø router ÁöÑ‰ΩçÁΩÆ router.push(context.url) // Á≠âÂà∞ router Â∞ÜÂèØËÉΩÁöÑÂºÇÊ≠•ÁªÑ‰ª∂ÂíåÈí©Â≠êÂáΩÊï∞Ëß£ÊûêÂÆå router.onReady(() =&gt; &#123; const matchedComponents = router.getMatchedComponents() // ÂåπÈÖç‰∏çÂà∞ÁöÑË∑ØÁî±ÔºåÊâßË°å reject ÂáΩÊï∞ÔºåÂπ∂ËøîÂõû 404 if (!matchedComponents.length) &#123; return reject(&#123; code: 404 &#125;) &#125; // Promise Â∫îËØ• resolve Â∫îÁî®Á®ãÂ∫èÂÆû‰æãÔºå‰ª•‰æøÂÆÉÂèØ‰ª•Ê∏≤Êüì resolve(app) &#125;, reject) &#125;)&#125; ‰øÆÊîπserver.js12345678910111213141516171819202122232425262728293031server.get('*', (req, res) =&gt; &#123; const context = &#123; title: 'hello', meta: ` &lt;meta charset="utf-8"&gt; `, url: req.url &#125; // const app = createApp(context) // renderer.renderToString(app, context).then(html =&gt; &#123; // res.end(html) // &#125;).catch(e =&gt; &#123; // res.status(500).end('Internal Server Error') // &#125;) createApp(context).then(app =&gt; &#123; renderer.renderToString(app, (err, html) =&gt; &#123; if (err) &#123; if (err.code === 404) &#123; res.status(404).end('Page not found') &#125; else &#123; res.status(500).end('Internal Server Error') &#125; &#125; else &#123; res.end(html) &#125; &#125;) &#125;)&#125;) ÂÜçÊ¨°ÊâìÂåÖ1.ÊâßË°å‰ª•‰∏ãÂëΩ‰ª§Ôºö12//ÁîüÊàêÂÆ¢Êà∑Á´ØÊâìÂåÖÊñá‰ª∂webpack --config ./build/webpack.client.config.js ‰ºöÂú®distÁõÆÂΩï‰∏ãÁîüÊàêÔºö 0.client.js main.client.js manifest.client.js 2.ÊâßË°å‰ª•‰∏ãÂëΩ‰ª§Ôºö12//ÁîüÊàêÊúçÂä°Á´ØÊâìÂåÖÊñá‰ª∂webpack --config ./build/webpack.server.config.js ‰ºöÂú®distÁõÆÂΩï‰∏ãÁîüÊàêÔºö 0.server.js main.server.js ‰∏äÈù¢ÁöÑ0.client.jsÂíå0.server.jsÂ∞±ÊòØÂä®ÊÄÅÂä†ËΩΩÁöÑÁªÑ‰ª∂hello.vueÊâÄÊâìÂåÖÂá∫Êù•ÁöÑÊñá‰ª∂ÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÊåâÈúÄÂºïÁî® ÊÄªÁªì‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂè™ÊòØÂÆåÊàê‰∫ÜÂæàÂ∞èÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÁúüÊ≠£ÊÉ≥Ë¶ÅÊäïÂÖ•Âà∞Áîü‰∫ßÂ∑•‰ΩúÈáèÊØîËøô‰∏™Â§ßÂ§™Â§öÔºåÂõ†Ê≠§Â¶ÇÊûú‰∏çÊòØÂøÖË¶ÅÔºåÊé®Ëçê‰ΩøÁî®Áé∞ÊúâÁöÑÊúçÂä°Á´ØÊ∏≤ÊüìÊ°ÜÊû∂Ôºönext.js/nuxt.jsdÁ≠â„ÄÇ]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>ssr</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫è]]></title>
    <url>%2F2018%2F04%2F22%2Fjs-sort%2F</url>
    <content type="text"><![CDATA[‰∏Ä„ÄÅÂâçË®ÄÊú¨ÊñáÊï¥ÁêÜ‰∫ÜÂá†ÁßçjsÊéíÂ∫èÊñπÊ≥ï sort() Âø´ÈÄüÊéíÂ∫è ÂÜíÊ≥°ÊéíÂ∫è ‰∫å„ÄÅsort()Âà©Áî®sort function ÂèØ‰ª•ÂÆåÊàê‰∏Ä‰∫õÁÆÄÂçïÁöÑÊï∞ÁªÑÊéíÂ∫è ÂØπÊï∞ÁªÑÊéíÂ∫è1234567var arr = [3,55,7];arr.sort();arr.sort(function(a,b) &#123; return a - b;&#125;);console.log(arr);//ËæìÂá∫ÁªìÊûú[3,7,55] Ê†πÊçÆÊï∞ÁªÑÂØπË±°ÁöÑÊüê‰∏ÄÂ±ûÊÄßÊéíÂ∫è123456789101112131415var arr= [ &#123; 'rank': 2&#125;, &#123; 'rank': 1&#125;, &#123; 'rank': 5&#125;, &#123; 'rank': 6&#125;];arr.sort(function(a, b) &#123; return a.rank - b.rank;&#125;);console.log(arr);//ËæìÂá∫ÁªìÊûú&#123; 'rank': 1&#125;,&#123; 'rank': 2&#125;,&#123; 'rank': 5&#125;,&#123; 'rank': 6&#125; ‰∏â„ÄÅÂø´ÈÄüÊéíÂ∫è1234567891011121314151617function quickSort(arr) &#123; let len = arr.length if(len &lt;= 1) &#123; return arr &#125; let i = Math.floor(len / 2) let num = arr.splice(i, 1) let left = [], right = [] for(let i = 0; i &lt; arr.length; i++) &#123; if(arr[i] &lt; num) &#123; left.push(arr[i]) &#125;else &#123; right.push(arr[i]) &#125; &#125; return quickSort(left).concat(num, quickSort(right))&#125;console.log(quickSort([1,11,2,2,6]))//[1,2,2,6,11] ÂèØ‰ª•ÁúãÂá∫ÔºåËôΩÁÑ∂ÊéíÂ∫èÊòØÊ≠£Á°ÆÁöÑÔºå‰ΩÜÊòØÊó†Ê≥ïÂèñÂá∫ÈáçÂ§çÂÖÉÁ¥†2ÔºåË¶ÅÂÆûÁé∞ÂéªÈáçÁöÑËØùÁî®ES6ÁöÑSetÊï∞ÊçÆÁªìÊûÑÂèØ‰ª•Êñπ‰æøÁöÑÂÅöÂà∞Ôºö 1234const arr = [1,11,2,2,6]const newArr = [...new Set(arr)]//or//const newArr = Array.from(new Set(arr)) Âõõ„ÄÅÂÜíÊ≥°ÊéíÂ∫è Âà©Áî®ÂèåÂ±ÇÂæ™ÁéØÊù•ÈÄê‰∏™ÊØîËæÉÊï∞ÁªÑÁöÑÊØè‰∏™ÂÄº 12345678910111213141516171819function bubbleSort(arr) &#123; for(let i = 0; i &lt; arr.length; i++) &#123; for(let j = i + 1; j &lt; arr.length; j++) &#123; //let n = 0 //if(arr[i] &gt; arr[j]) &#123; //n = arr[i] //arr[i] = arr[j] //arr[j] = n //&#125; //Êúâ‰∫ÜES6ÁöÑÁªìÊûÑËµãÂÄºÔºå‰∫§Êç¢Êï∞ÂÄºÂè™Ë¶Å‰∏ÄÂè•ËØù if(arr[i] &gt; arr[j]) &#123; [arr[i], arr[j]] = [arr[j], arr[i]] &#125; &#125; &#125; return arr&#125;console.log(bubbleSort([1,11,2,7]))//[1,2,7,11]]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>ÊéíÂ∫è</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂÅö‰∏Ä‰∏™Ëá™ÂÆö‰πâÊªöÂä®Êù°]]></title>
    <url>%2F2018%2F03%2F17%2Fv-custom%2F</url>
    <content type="text"><![CDATA[‰∏Ä„ÄÅÂâçË®ÄÊúÄËøëÂú®ÂÅöÁöÑÈ°πÁõÆÈúÄË¶ÅÁî®Âà∞Ëá™ÂÆö‰πâÊªöÂä®Êù°ÔºåÊó¢ÁÑ∂Êó∂Èó¥ÂÖÖË£ïÔºåÂ∞±Ëá™Â∑±ÂÅö‰∫Ü‰∏™„ÄÇÊàëÂ∞ÜÂÖ∂ÂÅöÊàê‰∫ÜVueÁöÑÂÖ®Â±ÄËá™ÂÆö‰πâÊåá‰ª§ÔºåÂè™Ë¶ÅÊª°Ë∂≥ÂØπÂ∫îÁöÑHTMLÁªìÊûÑÂ∞±ÂèØ‰ª•Âú®‰ªªÊÑèÂú∞ÊñπË∞ÉÁî®ÔºåÁõ∏ÂØπÊù•ËØ¥‰πüÊòØÂæàÊñπ‰æøÁöÑ„ÄÇ ‰∫å„ÄÅÂéüÁêÜÔºà‰ª•‰∏ãÈªòËÆ§ÂÜÖÂÆπÈ´òÂ∫¶Ë∂ÖÂá∫ÂÆπÂô®È´òÂ∫¶„ÄÇÔºâ 2.1 ÁªìÊûÑÈúÄË¶ÅÊª°Ë∂≥‰ª•‰∏ãHTMLÁªìÊûÑÔºö 12345678910&lt;div class="wrapper"&gt; &lt;div class="content-wrapper" v-mousewheel&gt; &lt;div class="content"&gt; &lt;!--ÊªöÂä®ÂÜÖÂÆπ--&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class="scroll-bar"&gt; &lt;div class="scroll-block" v-scrollY&gt;&lt;/div&gt; &lt;/div&gt;&lt;/div&gt; 2.2ÂéüÁêÜ ÈÄöËøáÊãñÊãΩ‰∫ã‰ª∂ÂíåÊªöËΩÆ‰∫ã‰ª∂Âä®ÊÄÅÊîπÂèòÂÜÖÂÆπÂå∫ÂüüÁöÑtopÂÄº Âõ†Ê≠§ÈúÄË¶Å: ËÆæÁΩÆÂÆπÂô®content-wrapperÂ±ûÊÄßÔºöoverflow: hidden; ËÆæÁΩÆÂÜÖÂÆπcontentÂ±ûÊÄßÔºöposition: absolute; ËøôÊ†∑ÔºåÂü∫Á°ÄÂ∑•‰ΩúÂ∞±Â∑≤Áªèok‰∫ÜÔºåÂºÄÂßãÂÜô‰∫§‰∫í‰∫ã‰ª∂„ÄÇ ‰∏â„ÄÅ‰ª£Á†Å3.1 ÊãñÊãΩ‰∫ã‰ª∂Â§ßÁöÑÊñπÂêë‰∏äÊ≤°‰ªÄ‰πàÈóÆÈ¢òÔºå‰ΩÜÊòØÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÊãñÂä®ÊªëÂùóÊó∂Â¶ÇÊûú‰∏çÂÅöÂ§ÑÁêÜÔºå‰ºöÂá∫Áé∞ÊäñÂä®Áé∞Ë±°ÔºåËøôÊòØÂõ†‰∏∫ÊãñÂä®Êó∂onmousemove‰∫ã‰ª∂È¢ëÁπÅËß¶ÂèëÂØºËá¥ÔºåÂõ†Ê≠§Âä†ÂÖ•Èò≤ÊäñÂäüËÉΩÂç≥ÂèØÔºö Âä†‰∏™ÂÆöÊó∂Âô®ÔºåÊØèÊ¨°ÊâßË°åonmousemoveÊó∂Ê∏ÖÈô§ÂÆöÊó∂Âô®Èò≤Ê≠¢Â§öÊ¨°Ëß¶ÂèëÔºåÂÆöÊó∂Âô®‰∫ã‰ª∂ËÆæÁΩÆ‰∏∫20msÊòØÂõ†‰∏∫ÊµèËßàÂô®ÁöÑÊúÄÂ§ßÂà∑Êñ∞È¢ëÁéá‰∏∫16.7ms/Ê¨°„ÄÇ ËøôÊ†∑ÔºåÂú®ÊªëÂùóscroll-block‰∏äÂä†‰∏Ä‰∏™Ëá™ÂÆö‰πâÊåá‰ª§v-scrollY,Â∞±ÂèØ‰ª•ÂÆûÁé∞ÊãñÊãΩÊïàÊûúÂï¶~ 12345678910111213141516171819202122232425262728Vue.directive('scrollY', &#123; bind (el, binding) &#123; let $el = el $el.onmousedown = function(e) &#123; let disY = e.clientY - $el.offsetTop let $content = $el.parentNode.parentNode.firstChild let contentH = $content.clientHeight document.onmousemove = function(e) &#123; clearTimeout(timer) let timer = setTimeout(() =&gt; &#123; // ÊªöÂä®ÊªëÂùóÊªöÂä®Ë∑ùÁ¶ª let top = Math.min(Math.max(e.clientY - disY, 0), 306) // ÂÜÖÂÆπÂå∫ÂüüÊªöÂä®Ë∑ùÁ¶ª let topC = top * (contentH - 600) / 306 $el.style.top = top + 'px' $content.style.top = -topC +'px' &#125;, 20) $el.style.backgroundColor = '#acaaaa' &#125; document.onmouseup = function(e) &#123; document.onmousemove = null document.onmouseup =null $el.style.backgroundColor = '#e9e9e9' &#125; &#125; &#125;&#125;) 3.2 ÊªöËΩÆ‰∫ã‰ª∂ÊªöËΩÆ‰∫ã‰ª∂Áõ∏ÂØπÊù•ËØ¥ÊØîËæÉÈ∫ªÁÉ¶ÔºåËøôÊòØÂõ†‰∏∫ÔºöfirefoxÂíåÂÖ∂‰ªñÊµèËßàÂô®ÁöÑÊªöËΩÆ‰∫ã‰ª∂‰∏ç‰∏ÄÊ†∑„ÄÇ Âú®firefox‰∏≠ÊòØDOMMouseScroll ,ÂÖ∂‰ªñÊµèËßàÂô®‰∏≠ÂàôÊòØmousewheel Âú®firefox‰∏≠ÈÄöËøáe.detailÁöÑÊ≠£Ë¥üÂÄºÊù•Âà§Êñ≠‰∏ä‰∏ãÊªöÂä®ÔºåÂÖ∂‰ªñÊµèËßàÂô®‰∏≠ÂàôÊòØÈÄöËøáe.wheelDetlaÊù•Âà§Êñ≠‰∏ä‰∏ãÊªöÂä® - firefox ÂÖ∂ÂÆÉÊµèËßàÂô® ‰∏äÊªö e.detail &lt; 0 e.wheelDetla &gt; 0 ‰∏ãÊªö e.detail &gt; 0 e.wheelDetla &lt; 0 ÂÖ∂ÂÆÉÊúâÂá†ÁÇπÂÄºÂæóËØ¥‰∏Ä‰∏ãÔºö ÊªöÂä®Êó∂ÈúÄË¶ÅÈòªÂÄºÈªòËÆ§‰∫ã‰ª∂ÔºåÈò≤Ê≠¢Âú®Â≠êÊªöÂä®Âå∫ÊªöÂä®Êó∂‰ΩøÁà∂ÊªöÂä®Âå∫Ë∑üÁùÄÊªöÂä®Ôºõ ÊªöÂä®Âå∫ÂÜÖÂÆπËÆæÁΩÆÔºöuser-select: none;Âõ†‰∏∫ÊàëÂèëÁé∞Âú®ÊãñÊãΩÁöÑÊó∂ÂÄôÈº†Ê†áÁ¶ªÂºÄÊªöÂä®ÊªëÂùó‰ºöÈÄâ‰∏≠ÊªöÂä®ÂÜÖÂÆπÂå∫ÊñáÂ≠ó„ÄÇ Ê≥®ÊÑè‰∏äÈù¢Âá†ÁÇπÂ∫îËØ•Â∞±Ê≤°ÈóÆÈ¢ò‰∫ÜÔºåÁÑ∂ÂêéÂú®ÂÆπÂô®content-wrapper‰∏äÊ∑ªÂä†v-mousewheelÂ∞±ÂèØ‰ª•ÊªöÂä®Âï¶ÔΩû123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354Vue.directive('mousewheel', &#123; bind( el, biding ) &#123; let num = 0 let $el = el function addEvent(obj, type, fn, capture) &#123; if (obj.addEventListener) &#123; if( !capture ) &#123;capture = false&#125; obj.addEventListener(type, fn, capture) &#125; else if (obj.attachEvent) &#123; obj.attachEvent("on" + type, fn) &#125; &#125; function scrollDown() &#123; let $block = $el.parentNode.children[1].children[0] let dis = Math.min(20 * (num--), $el.clientHeight - 600) $el.style.top = Math.min(0, -dis) + 'px' let topB = Math.max(0, dis) * 306 / ($el.clientHeight - 600) $block.style.top = topB + 'px' &#125; function scrollUp() &#123; let $block = $el.parentNode.children[1].children[0] let dis = Math.min(20 * (num++), $el.clientHeight - 600) $el.style.top = Math.min(0, -dis) + 'px' let topB = Math.min(0, -dis) * 306 / ($el.clientHeight - 600) $block.style.top = -topB + 'px' &#125; function customScroll(e) &#123; if( e.wheelDelta ) &#123; if (e.wheelDelta &gt; 0) &#123; //‰∏ãÊªö scrollDown() &#125; else &#123; //‰∏äÊªö scrollUp() &#125; &#125;else if ( e.detail ) &#123; //ÂÖºÂÆπÁÅ´Áãê if (e.detail &lt; 0) &#123; //‰∏ãÊªö scrollDown() &#125; else &#123; //‰∏äÊªö scrollUp() &#125; &#125; &#125; addEvent($el, 'mousewheel', (e) =&gt; &#123; let ev = e || window.event ev.preventDefault ? ev.preventDefault() : ev.returnvalue = false customScroll(e) &#125;) // ÂÖºÂÆπfirefox addEvent($el, 'DOMMouseScroll', (e) =&gt; &#123; let ev = e || window.event ev.preventDefault ? ev.preventDefault() : ev.returnvalue = false customScroll(e) &#125;) &#125;&#125;) Âõõ„ÄÅÂ∞èÁªìËÄÉËôëÂà∞ÊªöËΩÆ‰∫ã‰ª∂Âú®‰∏çÂêåÊµèËßàÂô®‰∏≠ÁöÑË°®Áé∞‰∏çÂêåÔºåÂ§ÑÁêÜÂ•ΩÂÖºÂÆπÊÄßÁöÑÈóÆÈ¢òÊòØËá≥ÂÖ≥ÈáçË¶ÅÁöÑ„ÄÇ]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Ëá™ÂÆö‰πâÊªöÂä®Êù°</tag>
        <tag>Ëá™ÂÆö‰πâÊåá‰ª§</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Promise‰πã‰∏çÂÆåÂÖ®Ëß£ËØª]]></title>
    <url>%2F2018%2F03%2F07%2Fpromise%2F</url>
    <content type="text"><![CDATA[‰∏Ä„ÄÅÂâçË®Ä1.‰ªÄ‰πàÊòØpromiseÔºü 2.promiseÊúâ‰ªÄ‰πàÁî®Ôºü 3.‰ªÄ‰πàÊó∂ÂÄôÁî®promiseÔºü MDNÁöÑÂÆòÊñπËß£ÈáäÊòØÔºö Promise ÂØπË±°Áî®‰∫éË°®Á§∫‰∏Ä‰∏™ÂºÇÊ≠•Êìç‰ΩúÁöÑÊúÄÁªàÁä∂ÊÄÅÔºàÂÆåÊàêÊàñÂ§±Ë¥•ÔºâÔºå‰ª•ÂèäÂÖ∂ËøîÂõûÁöÑÂÄº Êñ∞Â≠¶‰∏Ä‰∏™Êñ∞ÁöÑÊ¶ÇÂøµÁöÑÊó∂ÂÄôÂÖâ‰ªéÂ≠óÈù¢‰∏äÂÖ∂ÂÆûÊó†Ê≥ïÂæàÂ•ΩÁöÑÁêÜËß£ÂÖ∂Âê´‰πâÔºåÊÄª‰πãËÆ©Êàë‰ª¨Â∏¶ÁùÄËøô‰∏â‰∏™ÈóÆÈ¢òÔºå‰∏ÄÊ≠•Ê≠•ÊäΩ‰∏ùÂâ•ËåßÔºåÈÅìÂá∫ÂÆÉÁöÑÁúüÈù¢ÁõÆ ÊâÄË∞ìpromiseÔºåÁøªËØëÊàê‰∏≠ÊñáÂ∞±ÊòØÔºöËÆ∏ËØ∫„ÄÅÊâøËØ∫ÁöÑÊÑèÊÄùÔºåË°®Á§∫‰∏ÄÁßçÂ∞ÜÊù•ÁöÑÁä∂ÊÄÅ„ÄÇ ÂÆÉÂú®ÂºÇÊ≠•ËÆ°ÁÆó‰∏≠ÊâÆÊºîËÄÖÈáçË¶ÅÁöÑËßíËâ≤ÔºöÂÆÉÂèØ‰ª•Â∞ÜÂºÇÊ≠•Êìç‰ΩúÈòüÂàóÂåñÔºåÊåâÁÖßÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÈ°∫Â∫èËøõË°åÊâßË°åÔºåÂπ∂‰∏îËøîÂõûÁ¨¶ÂêàÈ¢ÑÊúüÁöÑÁªìÊûú Êàë‰ª¨ÂèØ‰ª•Âú®ÂØπË±°‰πãÈó¥‰º†ÈÄíÂíåÊìç‰ΩúpromiseÔºåÂ∏ÆÂä©Êàë‰ª¨Â§ÑÁêÜÈòüÂàó ‰∫å„ÄÅÂéÜÂè≤Â¶ÇÊûú‰∫ÜËß£JavaScriptÁöÑÂéÜÂè≤ÔºåÂèØËÉΩ‰ºöÂ∏ÆÂä©Êàë‰ª¨Êõ¥Â•ΩÁöÑËÆ§ËØÜpromise„ÄÇ ‰∏∫Ê£ÄÊü•Ë°®ÂçïËÄåÁîüÁöÑJavaScript Âú®JavaScriptÂá∫Áé∞‰ª•ÂâçÔºåÁî®Êà∑Âú®Â°´ÂÜôË°®ÂçïÊó∂Á®çÊúâ‰∏çÊÖéÂ∞±ÂæóÈáçÊñ∞Â°´ÂÜô‰∏ÄÈÅçÔºåÊØ´Êó†Áî®Êà∑‰ΩìÈ™å„ÄÇËøôÊó∂Â∞±Âá∫Áé∞‰∫ÜJavaScriptÔºå‰ªñÂ§©ÁîüÂ∞±ÊòØÁî®Êù•Ê£ÄÊü•Ë°®ÂçïÁöÑ„ÄÇÈÇ£‰πà‰Ωú‰∏∫‰∏ÄÈó®ÊµèËßàÂô®Á´ØÁöÑËØ≠Ë®ÄÔºåÂ∞±Ê≥®ÂÆö‰∫ÜÂÆÉÂºÇÊ≠•ÁöÑÂëΩËøêÔºöÂÆÉÁöÑÊâßË°å‰∏çËÉΩ‰ΩøÈ°µÈù¢ÂÜªÁªì„ÄÇ ÂÖ∂ÂÆûÂú®JavaScriptÈáåÈù¢ÂºÇÊ≠•ÁöÑÈóÆÈ¢òËøò‰∏çÊòØÁâπÂà´‰∏•ÈáçÔºåÂõ†‰∏∫JavaScriptÈáåÁöÑÂºÇÊ≠•‰∏ªË¶Å‰ª•DOMÊìç‰Ωú‰∏∫‰∏ªÔºå‰ΩÜÊòØËá™‰ªéÂá∫Áé∞‰∫ÜNodejs‰ª•ÂêéÔºåÂÆÉÂØπÂºÇÊ≠•ÁöÑ‰æùËµñËøõ‰∏ÄÊ≠•Âä†Ââß„ÄÇ ‰∏â„ÄÅpromiseÁöÑÂü∫Êú¨Ê¶ÇÂøµ‰ΩøÁî®promiseÁöÑÂü∫Êú¨ÊñπÊ≥ïÔºö12345678910111213new Promise( (resolve, reject) =&gt; &#123; resolve() //or reject()&#125; ).then(//ÂèØ‰ª•ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑpromiseÂØπË±°//ÂèØ‰ª•ËøîÂõû‰∏Ä‰∏™ÂêåÊ≠•ÁöÑÂÄº//ÂèØ‰ª•ÊäõÂá∫‰∏Ä‰∏™ÂêåÊ≠•ÁöÑÂºÇÂ∏∏).catch(//ÊçïËé∑ÈîôËØØ) promiseÊúâ‰∏âÁßçÁä∂ÊÄÅÔºö pendingÔºöËøõË°å‰∏≠ fulfilledÔºöÊàêÂäü rejectedÔºöÂ§±Ë¥• ËÄå‰∏î‰∏ÄÊó¶ÂÖ∂Áä∂ÊÄÅÂèò‰∏∫fulfillÊàñrejectÔºåÂ∞±‰∏çÂèØÁªßÁª≠ÊîπÂèòÁä∂ÊÄÅ promiseÈÄöËøáÂºïÂÖ•‰ªÖ‰ªÖ‰∏Ä‰∏™ÂõûË∞ÉÂáΩÊï∞Êù•ÈÅøÂÖçÊâÄË∞ìÁöÑÂõûË∞ÉÂú∞Áã±Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåÂú®.then()ÈáåÈù¢‰∏çÂ∫îËØ•Âá∫Áé∞Êñ∞ÁöÑÂõûË∞É„ÄÇÊ≠£Á°ÆÁöÑÂÅöÊ≥ïÊòØÔºöËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑpromiseÂØπË±°Êù•ÂÆûÁé∞.then()ÁöÑÈìæÂºèË∞ÉÁî®„ÄÇ Âõõ„ÄÅpromiseÈô∑Èò±ÔºàpromiseÁ©øÈÄèÔºâÁ∫∏‰∏äÂæóÊù•ÁªàËßâÊµÖÔºåÁõ¥Êé•‰∏ä‰ª£Á†ÅÂêßÔºö 1234567891011121314151617181920212223//Âú®promiseÈáåÈù¢‰∏çËøîÂõû‰ªª‰ΩïÂÄºÊàñËÄÖËøîÂõûfalseÔºå‰ºöÊúâ‰ªÄ‰πàÁªìÊûúÔºüconsole.log('1');new Promise(resolve =&gt; &#123; setTimeout( () =&gt; &#123; resolve('2'); &#125;, 2000);&#125;) .then( value =&gt; &#123; console.log(value); console.log('3'); (function () &#123; return new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; console.log('4'); resolve('5'); &#125;, 2000); &#125;); &#125;()); return false; &#125;) .then( value =&gt; &#123; console.log(value + '6'); &#125;); ÊâßË°åÈ°∫Â∫èÔºö1-2-3-false6-4 Ëß£ÈáäÔºöÂú®promiseÈáåÈù¢‰∏çËøîÂõû‰ªª‰ΩïÂÄºÊàñËÄÖËøîÂõûfalseÔºå‰ªñ‰ºöÁ´ãÂàªÂæÄ‰∏ãÊâßË°å„ÄÇÂêåÁêÜÔºåÂ¶ÇÊûúÂéªÊéâreturn false,ÁªìÊûúÂ∞±ÊòØ 1-2-3-undefined6-4 ÔºàÊ≥®ÊÑèÔºöÈÇ£‰∏™Á´ãÂç≥ÊâßË°åÂáΩÊï∞Áî±‰∫é‰∏çÂÜç.then()ÁöÑÁõ¥Êé•ÂõûË∞ÉÈáåÈù¢ÔºåÂõ†Ê≠§ÂÆÉ‰∏é.then()ÁöÑÂõûË∞É‰∏çÂ§Ñ‰∫éÂêå‰∏ÄÊâßË°åÊ†àÔºâ ÂÜôÂá∫ÁÆÄÊ¥ÅÁöÑpromise 1234new Promise( (resolve, reject) =&gt; &#123; resolve(something)&#125;).then(/*```*/) ÂÖ∂ÂÆûÂÜôÊàê‰∏ãÈù¢ËøôÁßçÊñπÂºèÊõ¥Âä†Â•ΩÁúã 1Promise.resolve(something).then(/*```*/) ÈÇ£‰πàÔºåÊàë‰ª¨ÂÜçÊù•Áúã‰∏Ä‰∏™‰æãÂ≠êÔºö 12345Promise.resolve('foo').then(Promise.resolve('bar')).then((res) =&gt; &#123; consoe.log(res) // foo&#125;) ÁªìÊûúÂ±ÖÁÑ∂‰∏çÊòØ‚Äòbar‚ÄôËÄåÊòØ‚Äòfoo‚ÄôÔºåÂÆûÈôÖ‰∏äËøôÂíåÂâçÈù¢ÁöÑ‰æãÂ≠êÂæàÁõ∏‰ººÔºåÂ¶ÇÊûúÁªô.then()‰º†ÈÄíÁöÑ‰∏çÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂÆÉÂõûÁõ¥Êé•Ëß£Êûê‰∏∫.then(null)ÔºåÂØºËá¥Á´ãÂç≥ÊâßË°å‰∏ã‰∏Ä‰∏™.then(),ÂèëÁîüÊâÄË∞ìÁöÑpromiseÁ©øÈÄè Â¶ÇÊûúÊÉ≥Ë¶ÅÂæóÂà∞‚Äòbar‚Äô,ÂèØ‰ª•Ëøô‰πàÂÜôÔºö 1234567Promise.resolve('foo').then( () =&gt; &#123; return Promise.resolve('bar')&#125;).then( (res) =&gt; &#123; consoe.log(res) // bar&#125;) ÊúÄÂêéÔºåÊé®ËçêËøôÁØáÊñáÁ´†Ôºöwe have a problem with promises]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>ES6</tag>
        <tag>promise</tag>
      </tags>
  </entry>
</search>
